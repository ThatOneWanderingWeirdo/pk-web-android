{"version":3,"sources":["History.js","default_discord_avatar.png","Constants/constants.js","Components/Private/Edit/EditSystem.js","Components/Private/Edit/EditSystemPrivacy.js","Components/Private/System.js","Components/Private/MemberCard.js","Components/Private/MemberPage.js","Pages/MemberPages.js","Components/Loading.js","Components/Private/Memberlist.js","Pages/Dash.js","Components/Footer.js","Components/Public/ProfileCard.js","Components/Public/ProfilePage.js","Pages/ProfilePages.js","Components/Public/ProfileList.js","Components/Public/Profile.js","Pages/MemberProfile.js","Pages/Public.js","Pages/Home.js","Pages/Settings.js","Pages/Template.js","Components/Navbar.js","App.js","index.js","Functions/discord-parser.js"],"names":["createBrowserHistory","API_URL","EditSystem","name","tag","timezone","avatar","banner","editDesc","setEditMode","setErrorAlert","setUser","user","useState","invalidTimezone","setInvalidTimezone","useForm","registerEdit","register","handleSubmitEdit","handleSubmit","onSubmit","data","tz","moment","zone","fetch","method","body","JSON","stringify","headers","Authorization","localStorage","getItem","then","res","json","prevState","setItem","catch","error","console","Text","className","Row","xs","lg","Label","Control","defaultValue","required","href","rel","target","type","Group","maxLength","as","variant","onClick","EditSystemPrivacy","setPrivacyEdit","registerPrivacy","handleSubmitPrivacy","description_privacy","member_list_privacy","front_privacy","front_history_privacy","System","props","match","useRouteMatch","parse","setName","setTag","setTimezone","setAvatar","setBanner","desc","setDesc","setEditDesc","editMode","privacyEdit","privacyView","setPrivacyView","errorAlert","useEffect","toHTML","require","avatar_url","avatarsmall","replace","description","autosize","document","querySelector","style","backgroundImage","alt","Header","Title","id","trigger","src","width","height","tabIndex","roundedCircle","modal","close","maxWidth","thumbnail","defaultAvatar","Body","size","maxHeight","options","dangerouslySetInnerHTML","__html","rounded","objectFit","history","push","MemberCard","sysID","member","setMember","displayName","setDisplayName","birthday","setBirthday","birthdate","setBirthdate","created","setCreated","pronouns","setPronouns","editPronouns","setEditPronouns","color","setColor","proxy_tags","proxyTags","setProxyTags","setprivacyEdit","proxyView","setProxyView","proxyEdit","setproxyEdit","open","setOpen","closeModal","wrongID","setWrongID","memberDeleted","setMemberDeleted","setValue","registerDelete","handleSubmitDelete","registerProxy","handleSubmitProxy","querySelectorAll","display_name","startsWith","bdaymoment","format","birthdaymoment","createdmoment","submitEdit","edit","Object","assign","submitPrivacy","deleteMember","memberID","submitProxy","newdata","filter","prefix","suffix","renderCard","borderLeft","pattern","o","position","placeholder","visibility","name_privacy","avatar_privacy","birthday_privacy","pronoun_privacy","metadata_privacy","map","item","index","rows","disabled","block","oldTags","length","proxytag","to","offset","placement","overlay","link","textField","createElement","innerText","appendChild","select","setSelectionRange","execCommand","removeChild","copyLink","fontSize","Toggle","BS","eventKey","Collapse","MemberPage","privacyMode","setPrivacyMode","proxyMode","setProxyMode","backgroundColor","MemberPages","useParams","memberpages","members","memberpage","Loading","fluid","animation","Memberlist","path","userId","isLoading","setIsLoading","isError","setIsError","currentPage","setCurrentPage","membersPerPage","setMembersPerPage","setMembers","searchBy","setSearchBy","privacyFilter","setPrivacyFilter","sortBy","setSortBy","sortOrder","setSortOrder","value","setTemplate","fetchMembers","useCallback","log","indexOfLastMember","indexOfFirstMember","currentMembers","toLowerCase","includes","active","pageAmount","Math","ceil","sortMembers","sort","a","b","localeCompare","reverse","slice","memberList","memberEdit","exact","onChange","e","Prev","Item","Ellipsis","Next","view","defaultActiveKey","Dash","Navigation","Link","ProfilePage","location","useLocation","pathname","list","substring","lastIndexOf","isForbidden","setIsForbidden","status","Error","message","Profile","system","setSystem","MemberProfile","fetchMember","Public","url","registerSys","handleSys","registerMember","handleMember","Home","isInvalid","setIsInvalid","isSubmit","setIsSubmit","removeItem","pkToken","Settings","forceUpdate","defaultChecked","icons","Template","template1","template2","template3","opacity","Navbar","darkMode","useDarkMode","Brand","title","toggle","App","updateState","ReactDOM","render","getElementById","markdown","highlight","htmlTag","tagName","content","attributes","isClosed","state","class","cssModuleNames","split","cl","join","attributeString","attr","prototype","hasOwnProperty","call","sanitizeText","unclosedTag","rules","blockQuote","defaultRules","source","prevSource","test","inQuote","exec","capture","all","removeSyntaxRegex","Boolean","codeBlock","inlineRegex","lang","trim","html","node","output","code","getLanguage","str","m","language","newline","escape","autolink","sanitizeUrl","em","parsed","inEmphasis","strong","u","strike","del","inlineCode","regex","text","escapeHTML","emoticon","order","br","anyScopeRegex","spoiler","discordCallbackDefaults","channel","role","everyone","here","rulesDiscord","discordUser","discordCallback","discordChannel","discordRole","discordEmoji","animated","discordEveryone","discordHere","rulesDiscordOnly","rulesEmbed","parser","parserFor","htmlOutput","htmlFor","ruleOutput","parserDiscord","htmlOutputDiscord","parserEmbed","htmlOutputEmbed","module","exports","inline","customParser","customHtmlOutput","embed","discordOnly","_parser","_htmlOutput","markdownEngine"],"mappings":"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","file":"static/js/main.bcce7655.chunk.js","sourcesContent":["import { createBrowserHistory } from \"history\";\r\nexport default createBrowserHistory();","export default \"data:image/png;base64,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\"","const API_URL = \"https://api.pluralkit.me/v1/\";\r\n\r\nexport default API_URL","import React, { useState } from \"react\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport * as BS from \"react-bootstrap\";\r\nimport moment from \"moment\";\r\nimport \"moment-timezone\";\r\n\r\nimport API_URL from \"../../../Constants/constants.js\";\r\n\r\nconst EditSystem = ({\r\n  name,\r\n  tag,\r\n  timezone,\r\n  avatar,\r\n  banner,\r\n  editDesc,\r\n  setEditMode,\r\n  setErrorAlert,\r\n  setUser,\r\n  user,\r\n}) => {\r\n  const [invalidTimezone, setInvalidTimezone] = useState(false);\r\n\r\n  const { register: registerEdit, handleSubmit: handleSubmitEdit } = useForm();\r\n\r\n  const submitEdit = (data) => {\r\n    if (data.tz) {\r\n      if (!moment.tz.zone(data.tz)) {\r\n        setInvalidTimezone(true);\r\n        return;\r\n      }\r\n    }\r\n    fetch(`${API_URL}s`, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: localStorage.getItem(\"token\"),\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then(() => {\r\n        setUser((prevState) => {\r\n          return { ...prevState, ...data };\r\n        });\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n        setEditMode(false);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        setErrorAlert(true);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <BS.Form onSubmit={handleSubmitEdit(submitEdit)}>\r\n      <BS.Form.Text className=\"mb-4\">\r\n        <b>Note:</b> if you refresh the page, the old data might show up again,\r\n        this is due to the bot caching data.\r\n        <br />\r\n        Try editing a member to clear the cache, or wait a few minutes before\r\n        refreshing.\r\n      </BS.Form.Text>\r\n      <BS.Form.Row>\r\n        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n          <BS.Form.Label>Name:</BS.Form.Label>\r\n          <BS.Form.Control\r\n            name=\"name\"\r\n            {...registerEdit(\"name\")}\r\n            defaultValue={name}\r\n          />\r\n        </BS.Col>\r\n        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n          <BS.Form.Label>Tag:</BS.Form.Label>\r\n          <BS.Form.Control\r\n            name=\"tag\"\r\n            {...registerEdit(\"tag\")}\r\n            defaultValue={tag}\r\n          />\r\n        </BS.Col>\r\n        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n          <BS.Form.Label>Timezone:</BS.Form.Label>\r\n          <BS.Form.Control\r\n            name=\"tz\"\r\n            {...registerEdit(\"tz\")}\r\n            defaultValue={timezone}\r\n            required\r\n          />\r\n          {invalidTimezone ? (\r\n            <BS.Form.Text>\r\n              Please enter a valid\r\n              <a\r\n                href=\"https://xske.github.io/tz/\"\r\n                rel=\"noreferrer\"\r\n                target=\"_blank\"\r\n              >\r\n                timezone\r\n              </a>\r\n            </BS.Form.Text>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </BS.Col>\r\n        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n          <BS.Form.Label>Avatar url:</BS.Form.Label>\r\n          <BS.Form.Control\r\n            type=\"url\"\r\n            name=\"avatar_url\"\r\n            {...registerEdit(\"avatar_url\")}\r\n            defaultValue={avatar}\r\n          />\r\n        </BS.Col>\r\n        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n          <BS.Form.Label>Banner url:</BS.Form.Label>\r\n          <BS.Form.Control\r\n            type=\"url\"\r\n            name=\"banner\"\r\n            {...registerEdit(\"banner\")}\r\n            defaultValue={banner}\r\n          />\r\n        </BS.Col>\r\n      </BS.Form.Row>\r\n      <BS.Form.Group className=\"mt-3\">\r\n        <BS.Form.Label>Description:</BS.Form.Label>\r\n        <BS.Form.Control\r\n          maxLength=\"1000\"\r\n          as=\"textarea\"\r\n          name=\"description\"\r\n          {...registerEdit(\"description\")}\r\n          defaultValue={editDesc}\r\n        />\r\n      </BS.Form.Group>\r\n      <BS.Button variant=\"light\" onClick={() => setEditMode(false)}>\r\n        Cancel\r\n      </BS.Button>{\" \"}\r\n      <BS.Button variant=\"primary\" type=\"submit\">\r\n        Submit\r\n      </BS.Button>\r\n    </BS.Form>\r\n  );\r\n};\r\n\r\nexport default EditSystem;\r\n","import React from \"react\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport * as BS from \"react-bootstrap\";\r\n\r\nimport API_URL from \"../../../Constants/constants.js\";\r\n\r\nconst EditSystemPrivacy = ({\r\n  setErrorAlert,\r\n  setUser,\r\n  user,\r\n  setPrivacyEdit,\r\n}) => {\r\n  const { register: registerPrivacy, handleSubmit: handleSubmitPrivacy } =\r\n    useForm();\r\n\r\n  // submit privacy stuffs\r\n  const submitPrivacy = (data) => {\r\n    fetch(`${API_URL}s`, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: localStorage.getItem(\"token\"),\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setUser((prevState) => {\r\n          return { ...prevState, ...data };\r\n        });\r\n        localStorage.setItem(\"user\", JSON.stringify(user));\r\n        setPrivacyEdit(false);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        setErrorAlert(true);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <BS.Form onSubmit={handleSubmitPrivacy(submitPrivacy)}>\r\n      <hr />\r\n      <h5>Editing privacy settings</h5>\r\n      <BS.Form.Row className=\"mb-3 mb-lg-0\">\r\n        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n          <BS.Form.Label>Description:</BS.Form.Label>\r\n          <BS.Form.Control\r\n            name=\"description_privacy\"\r\n            defaultValue={user.description_privacy}\r\n            as=\"select\"\r\n            {...registerPrivacy(\"description_privacy\")}\r\n          >\r\n            <option>public</option>\r\n            <option>private</option>\r\n          </BS.Form.Control>\r\n        </BS.Col>\r\n        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n          <BS.Form.Label>Member list:</BS.Form.Label>\r\n          <BS.Form.Control\r\n            name=\"member_list_privacy\"\r\n            defaultValue={user.member_list_privacy}\r\n            as=\"select\"\r\n            {...registerPrivacy(\"member_list_privacy\")}\r\n          >\r\n            <option>public</option>\r\n            <option>private</option>\r\n          </BS.Form.Control>\r\n        </BS.Col>\r\n        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n          <BS.Form.Label>Front:</BS.Form.Label>\r\n          <BS.Form.Control\r\n            name=\"front_privacy\"\r\n            as=\"select\"\r\n            defaultValue={user.front_privacy}\r\n            {...registerPrivacy(\"front_privacy\")}\r\n          >\r\n            <option>public</option>\r\n            <option>private</option>\r\n          </BS.Form.Control>\r\n        </BS.Col>\r\n        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n          <BS.Form.Label>Front history:</BS.Form.Label>\r\n          <BS.Form.Control\r\n            name=\"front_history_privacy\"\r\n            defaultValue={user.front_history_privacy}\r\n            as=\"select\"\r\n            {...registerPrivacy(\"front_history_privacy\")}\r\n          >\r\n            <option>public</option>\r\n            <option>private</option>\r\n          </BS.Form.Control>\r\n        </BS.Col>\r\n      </BS.Form.Row>\r\n      <BS.Button variant=\"light\" onClick={() => setPrivacyEdit(false)}>\r\n        Cancel\r\n      </BS.Button>{\" \"}\r\n      <BS.Button variant=\"primary\" type=\"submit\">\r\n        Submit\r\n      </BS.Button>\r\n      <hr />\r\n    </BS.Form>\r\n  );\r\n};\r\n\r\nexport default EditSystemPrivacy;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport * as BS from \"react-bootstrap\";\r\nimport { useRouteMatch } from \"react-router-dom\";\r\nimport autosize from \"autosize\";\r\nimport \"moment-timezone\";\r\nimport Popup from \"reactjs-popup\";\r\nimport Twemoji from \"react-twemoji\";\r\n\r\nimport history from \"../../History.js\";\r\nimport defaultAvatar from \"../../default_discord_avatar.png\";\r\nimport { FaAddressCard } from \"react-icons/fa\";\r\nimport EditSystem from \"./Edit/EditSystem.js\";\r\nimport EditSystemPrivacy from \"./Edit/EditSystemPrivacy.js\";\r\n\r\nexport default function System(props) {\r\n  // match the url, if there's a member ID there, don't render this component at all\r\n  const match = useRouteMatch(\"/dash/:memberID\");\r\n\r\n  // get the user from the localstorage\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"user\")));\r\n\r\n  // bunch of useState stuff, used in the useEffect() hook below\r\n  const [name, setName] = useState(\"\");\r\n  const [tag, setTag] = useState(\"\");\r\n  const [timezone, setTimezone] = useState(\"\");\r\n  const [avatar, setAvatar] = useState(\"\");\r\n  const [banner, setBanner] = useState(\"\");\r\n  const [desc, setDesc] = useState(\"\");\r\n  const [editDesc, setEditDesc] = useState(\"\");\r\n\r\n  // more useState, this time to actually handle state\r\n  // TODO: name them something more intuitive maybe?\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [privacyEdit, setPrivacyEdit] = useState(false);\r\n  const [privacyView, setPrivacyView] = useState(false);\r\n\r\n  const [errorAlert, setErrorAlert] = useState(false);\r\n\r\n  // this useEffect does a couple of things after the user is gotten from localstorage\r\n  useEffect(() => {\r\n    // first require the discord markdown parser\r\n    const { toHTML } = require(\"../../Functions/discord-parser.js\");\r\n\r\n    // check if there's a name object in user, if it's null, set name to a blank string, otherwise set name to user.name\r\n    if (user.name) {\r\n      setName(user.name);\r\n    } else setName(\"\");\r\n\r\n    // same as above, but with the user tag instead\r\n    if (user.tag) {\r\n      setTag(user.tag);\r\n    } else setTag(\"\");\r\n\r\n    // same as above but with timezone\r\n    if (user.tz) {\r\n      setTimezone(user.tz);\r\n    } else setTimezone(\"\");\r\n\r\n    // also trims the avatar url so that 1. pngs won't be converted to jpegs and 2. won't be resized to 256x256\r\n    if (user.avatar_url) {\r\n      var avatarsmall = user.avatar_url.replace(\"&format=jpeg\", \"\");\r\n      setAvatar(avatarsmall.replace(\"?width=256&height=256\", \"\"));\r\n    } else setAvatar(\"\");\r\n\r\n    if (user.banner) {\r\n      setBanner(user.banner);\r\n    } else setBanner(\"\");\r\n\r\n    // same as above, but with descriptions\r\n    // two description variables! one is just the plain description, the other is parsed and converted to html\r\n    if (user.description) {\r\n      setDesc(toHTML(user.description));\r\n      setEditDesc(user.description);\r\n    } else {\r\n      setDesc(\"(no description)\");\r\n      setEditDesc(\"\");\r\n    }\r\n  }, [user.description, user.tag, user.avatar_url, user.tz, user.name, user.banner]);\r\n\r\n  // this just resizes the textarea when filled with larger amounts of text\r\n  useEffect(() => {\r\n    autosize(document.querySelector(\"textarea\"));\r\n  });\r\n\r\n  if (match) return null;\r\n\r\n  return (\r\n    <>\r\n    { user.banner && !localStorage.getItem(\"hidebanners\") ? <div className=\"banner\" style={{backgroundImage: `url(${user.banner})`}} alt=\"\"/> : \"\"}\r\n    <BS.Card className=\"mb-3 mt-3 w-100\">\r\n      <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n        <BS.Card.Title className=\"float-left\">\r\n          <FaAddressCard className=\"mr-4 float-left\" /> {name} ({user.id})\r\n        </BS.Card.Title>\r\n        {user.avatar_url ? (\r\n          <Popup\r\n            trigger={\r\n              <BS.Image\r\n                src={`${user.avatar_url}`}\r\n                style={{ width: 50, height: 50 }}\r\n                tabIndex=\"0\"\r\n                className=\"float-right\"\r\n                roundedCircle\r\n              />\r\n            }\r\n            className=\"avatar\"\r\n            modal\r\n          >\r\n            {(close) => (\r\n              <div className=\"text-center w-100 m-0\" onClick={() => close()}>\r\n                <div className=\"m-auto\" style={{maxWidth: '640px'}}>\r\n                    <BS.Image src={`${avatar}`} style={{'maxWidth': '100%', height: 'auto'}} thumbnail />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </Popup>\r\n        ) : (\r\n          <BS.Image\r\n            src={defaultAvatar}\r\n            style={{ width: 50, height: 50 }}\r\n            className=\"float-right\"\r\n            roundedCircle\r\n          />\r\n        )}\r\n      </BS.Card.Header>\r\n      <BS.Card.Body>\r\n        {errorAlert ? (\r\n          <BS.Alert variant=\"danger\">\r\n            Something went wrong, please try logging in and out again.\r\n          </BS.Alert>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {editMode ? (\r\n          <EditSystem\r\n            editDesc={editDesc}\r\n            name={name}\r\n            tag={tag}\r\n            timezone={timezone}\r\n            avatar={avatar}\r\n            banner={banner}\r\n            setErrorAlert={setErrorAlert}\r\n            user={user}\r\n            setUser={setUser}\r\n            setEditMode={setEditMode}\r\n          />\r\n        ) : (\r\n          <>\r\n            <BS.Row>\r\n              <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                <b>ID:</b> {user.id}\r\n              </BS.Col>\r\n              <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                <b>Tag:</b> {tag}\r\n              </BS.Col>\r\n              <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                <b>Timezone:</b> {timezone}\r\n              </BS.Col>\r\n              {privacyView ? (\r\n                \"\"\r\n              ) : (\r\n                <>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                  <b>Privacy:</b>{\" \"}\r\n                  <BS.Button\r\n                    variant=\"light\"\r\n                    size=\"sm\"\r\n                    onClick={() => setPrivacyView(true)}\r\n                  >\r\n                    View\r\n                  </BS.Button>\r\n                </BS.Col>\r\n                {user.banner ? \r\n                  <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                  <b>Banner:</b>{\" \"}\r\n                  <Popup\r\n                    trigger={\r\n                      <BS.Button\r\n                    variant=\"light\"\r\n                    size=\"sm\"\r\n                  >\r\n                    View\r\n                  </BS.Button>\r\n                    }\r\n                    className=\"banner\"\r\n                    modal\r\n                  >\r\n                    {(close) => (\r\n                      <div className=\"text-center w-100\" onClick={() => close()}>\r\n                        <div className=\"m-auto\" style={{maxWidth: '100%'}}>\r\n                            <BS.Image src={`${banner}`} style={{maxWidth: 'auto', maxHeight: '640px'}} thumbnail />\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </Popup>\r\n                  </BS.Col>\r\n                 : \"\" }\r\n                 </> \r\n                 )}\r\n            </BS.Row>\r\n            {privacyEdit ? (\r\n              <EditSystemPrivacy\r\n                setErrorAlert={setErrorAlert}\r\n                setUser={setUser}\r\n                user={user}\r\n                setPrivacyEdit={setPrivacyEdit}\r\n              />\r\n            ) : privacyView ? (\r\n              <>\r\n                <hr />\r\n                <h5>Viewing privacy settings</h5>\r\n                <BS.Row>\r\n                  <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                    <b>Description:</b> {user.description_privacy}\r\n                  </BS.Col>\r\n                  <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                    <b>Member list: </b>\r\n                    {user.member_list_privacy}\r\n                  </BS.Col>\r\n                  <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                    <b>Front:</b> {user.front_privacy}\r\n                  </BS.Col>\r\n                  <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                    <b>Front history:</b> {user.front_history_privacy}\r\n                  </BS.Col>\r\n                </BS.Row>\r\n                <BS.Button\r\n                  variant=\"light\"\r\n                  onClick={() => setPrivacyView(false)}\r\n                >\r\n                  Exit\r\n                </BS.Button>{\" \"}\r\n                <BS.Button\r\n                  variant=\"primary\"\r\n                  onClick={() => setPrivacyEdit(true)}\r\n                >\r\n                  Edit\r\n                </BS.Button>\r\n                <hr />\r\n              </>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <p>\r\n              <b>Description:</b>\r\n            </p>\r\n            {localStorage.getItem(\"twemoji\") ? (\r\n              <Twemoji options={{ className: \"twemoji\" }}>\r\n                <p dangerouslySetInnerHTML={{ __html: desc }}></p>\r\n              </Twemoji>\r\n            ) : (\r\n              <p dangerouslySetInnerHTML={{ __html: desc }}></p>\r\n            )}\r\n            { !user.banner || !localStorage.getItem(\"bottombanners\") ? \"\" : \r\n              <BS.Image rounded className=\"mb-2\" style={{width: '100%', maxHeight: '15rem', objectFit: 'cover'}} src={banner}/>\r\n            }\r\n            {privacyEdit ? (\r\n              \"\"\r\n            ) : privacyView ? (\r\n              \"\"\r\n            ) : (\r\n              <>\r\n                <BS.Button variant=\"light\" onClick={() => setEditMode(true)}>\r\n                  Edit\r\n                </BS.Button>\r\n                <BS.Button\r\n                  variant=\"primary\"\r\n                  className=\"float-right\"\r\n                  onClick={() => history.push(`/profile/${user.id}`)}\r\n                >\r\n                  Profile\r\n                </BS.Button>\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n      </BS.Card.Body>\r\n    </BS.Card>\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport  * as BS from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\";\r\nimport moment from 'moment';\r\nimport Popup from 'reactjs-popup';\r\nimport 'reactjs-popup/dist/index.css';\r\nimport autosize from 'autosize';\r\nimport LazyLoad from 'react-lazyload';\r\nimport Twemoji from 'react-twemoji';\r\n\r\nimport API_URL from \"../../Constants/constants.js\";\r\n\r\nimport defaultAvatar from '../../default_discord_avatar.png'\r\nimport { FaLink, FaLock, FaTrashAlt } from \"react-icons/fa\";\r\n\r\nexport default function MemberCard(props) {\r\n\r\n    const system = JSON.parse(localStorage.getItem('user'));\r\n    const sysID = system.id;\r\n    const [member, setMember] = useState(props.member);\r\n\r\n    const [ displayName, setDisplayName ] = useState(\"\");\r\n    const [ birthday, setBirthday ] = useState(\"\");\r\n    const [ birthdate, setBirthdate ] = useState(\"\");\r\n    const [ created, setCreated ] = useState(\"\");\r\n    const [ pronouns, setPronouns ] = useState(\"\");\r\n    const [ editPronouns, setEditPronouns ] = useState(\"\");\r\n    const [ avatar, setAvatar ] = useState(\"\");\r\n    const [ banner, setBanner ] = useState(\"\");\r\n    const [ color, setColor ] = useState(\"\");\r\n    const [ desc, setDesc ] = useState(\"\");\r\n    const [ editDesc, setEditDesc ] = useState(\"\");\r\n    const [ proxyTags, setProxyTags ] = useState(member.proxy_tags);\r\n\r\n    const [ editMode, setEditMode ] = useState(false);\r\n    const [ privacyEdit, setprivacyEdit ] = useState(false);\r\n    const [ privacyView, setPrivacyView ] = useState(false);\r\n    const [ proxyView, setProxyView ] = useState(false);\r\n    const [ proxyEdit, setproxyEdit ] = useState(false);\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const closeModal = () => setOpen(false);\r\n\r\n    const [ errorAlert, setErrorAlert ] = useState(false);\r\n    const [ wrongID, setWrongID ] = useState(false);\r\n    const [ memberDeleted, setMemberDeleted ] = useState(false);\r\n\r\n    const {\r\n        register: registerEdit,\r\n        handleSubmit: handleSubmitEdit,\r\n        setValue\r\n      } = useForm();\r\n\r\n    const {\r\n        register: registerPrivacy,\r\n        handleSubmit: handleSubmitPrivacy\r\n      } = useForm();\r\n\r\n    const {\r\n        register: registerDelete,\r\n        handleSubmit: handleSubmitDelete\r\n      } = useForm();\r\n  \r\n      const {\r\n        register: registerProxy,\r\n        handleSubmit: handleSubmitProxy,\r\n        } = useForm();\r\n\r\n        useEffect(() => {\r\n            autosize(document.querySelectorAll('textarea'));\r\n        })\r\n\r\n    useEffect(() => {\r\n        const { toHTML } = require('../../Functions/discord-parser.js');\r\n\r\n        if (member.display_name) {\r\n            setDisplayName(member.display_name)\r\n        } else setDisplayName('')\r\n\r\n        if (member.birthday) { \r\n            setBirthdate(member.birthday)\r\n            if (member.birthday.startsWith('0004-')) {\r\n                var bdaymoment = moment(member.birthday, 'YYYY-MM-DD').format('MMM D');\r\n                setBirthday(bdaymoment);\r\n            } else {\r\n                var birthdaymoment =  moment(member.birthday, 'YYYY-MM-DD').format('MMM D, YYYY');\r\n                setBirthday(birthdaymoment);\r\n            }\r\n        } else { setBirthday('');\r\n        setBirthdate('');\r\n    }\r\n\r\n        var createdmoment = moment(member.created).format('MMM D, YYYY');\r\n        setCreated(createdmoment);\r\n\r\n        if (member.pronouns) {\r\n            setPronouns(toHTML(member.pronouns));\r\n            setEditPronouns(member.pronouns);\r\n        } else { setPronouns('');\r\n        setEditPronouns('');\r\n    }\r\n\r\n        if (member.avatar_url) {\r\n            var avatarsmall = member.avatar_url.replace('&format=jpeg', '');\r\n            setAvatar(avatarsmall.replace('?width=256&height=256', ''))\r\n        } else setAvatar('')\r\n        \r\n        if (member.color) {\r\n            setColor(member.color);\r\n        } else setColor('');\r\n\r\n        if (member.banner) {\r\n            setBanner(member.banner);\r\n          } else setBanner(\"\");\r\n\r\n        if (member.description) {\r\n            setDesc(toHTML(member.description));\r\n            setEditDesc(member.description);\r\n        } else { setDesc(\"(no description)\");\r\n        setEditDesc(\"\");\r\n    }\r\n    }, [member.description, member.color, member.birthday, member.display_name, member.pronouns, member.avatar_url, member.proxy_tags, member.created, member.banner]);\r\n\r\n    const submitEdit = data => {\r\n        props.edit(Object.assign(member, data));\r\n        \r\n        fetch(`${API_URL}m/${member.id}`,{\r\n            method: 'PATCH',\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': localStorage.getItem(\"token\")\r\n            }}).then (res => res.json()\r\n            ).then (data => { \r\n                setMember(prevState => {return {...prevState, ...data}});\r\n                setErrorAlert(false);\r\n                setEditMode(false);\r\n        }\r\n            ).catch (error => {\r\n                console.error(error);\r\n                setErrorAlert(true);\r\n            });\r\n    }\r\n\r\n    const submitPrivacy = data => {\r\n        props.edit(Object.assign(member, data));\r\n\r\n        fetch(`${API_URL}m/${member.id}`,{\r\n            method: 'PATCH',\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': localStorage.getItem(\"token\")\r\n            }}).then (res => res.json()\r\n            ).then (data => {\r\n                setMember(prevState => {return {...prevState, ...data}});\r\n                setErrorAlert(false); \r\n                setprivacyEdit(false)\r\n        }\r\n            ).catch (error => {\r\n                console.error(error);\r\n                setErrorAlert(true);\r\n             })\r\n    }\r\n\r\n    const deleteMember = data => {\r\n        if (data.memberID !== member.id) {\r\n        setWrongID(true);\r\n        } else {\r\n            fetch(`${API_URL}m/${member.id}`,{\r\n                method: 'DELETE',\r\n                headers: {\r\n                'Authorization': localStorage.getItem(\"token\")\r\n                }}).then (() => {\r\n                    setErrorAlert(false);\r\n                    setMemberDeleted(true);\r\n                })\r\n                .catch (error => {\r\n                    console.error(error);\r\n                    setErrorAlert(true);\r\n                })\r\n        }\r\n    }\r\n\r\n    function addProxyField() {\r\n        setProxyTags(oldTags => [...oldTags, {prefix: '', suffix: ''}] )\r\n    }\r\n\r\n    function resetProxyFields() {\r\n        setproxyEdit(false);\r\n        setProxyTags(member.proxy_tags);\r\n    }\r\n\r\n    const submitProxy = data => {\r\n\r\n        const newdata = {proxy_tags: data.proxy_tags.filter(tag => !(tag.prefix === \"\" && tag.suffix === \"\"))}\r\n        props.edit(Object.assign(member, newdata));\r\n\r\n        fetch(`${API_URL}m/${member.id}`,{\r\n            method: 'PATCH',\r\n            body: JSON.stringify(newdata),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': localStorage.getItem(\"token\")\r\n            }}).then (res => res.json()\r\n            ).then (data => { \r\n                setMember(prevState => {return {...prevState, ...data}}); \r\n                setProxyTags(data.proxy_tags);\r\n                setErrorAlert(false);\r\n                setproxyEdit(false);\r\n        }\r\n            ).catch (error => {\r\n                console.error(error);\r\n                setErrorAlert(true);\r\n            });\r\n    }\r\n\r\n    function copyLink() {\r\n        var link = `https://pk-webs.spectralitree.com/profile/${sysID}/${member.id}`\r\n        var textField = document.createElement('textarea')\r\n        textField.innerText = link\r\n        document.body.appendChild(textField);\r\n\r\n        textField.select();\r\n        textField.setSelectionRange(0, 99999);\r\n        document.execCommand('copy');\r\n\r\n        document.body.removeChild(textField);\r\n    }\r\n\r\n    function renderCard() {\r\n        return (\r\n            <BS.Card.Body style={{borderLeft: `5px solid #${color}` }}>\r\n                { errorAlert ? <BS.Alert variant=\"danger\">Something went wrong, please try logging in and out again.</BS.Alert> : \"\" }\r\n                { editMode ?\r\n                <>\r\n                <BS.Form id='Edit' onSubmit={handleSubmitEdit(submitEdit)}>\r\n                <BS.Form.Row>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Name:</BS.Form.Label>\r\n                   <BS.Form.Control name=\"name\" {...registerEdit(\"name\")} defaultValue={member.name} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Display name: </BS.Form.Label>\r\n                    <BS.Form.Control name=\"display_name\" {...registerEdit(\"display_name\")}  defaultValue={displayName} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Birthday:</BS.Form.Label>\r\n                    <BS.Form.Control  pattern=\"^\\d{4}\\-(0[1-9]|1[012])\\-(0[1-9]|[12][0-9]|3[01])$\" name=\"birthday\" {...registerEdit(\"birthday\")}  defaultValue={birthdate}/>\r\n                    <BS.Form.Text>(YYYY-MM-DD)</BS.Form.Text>\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Pronouns:</BS.Form.Label>\r\n                    <BS.Form.Control maxLength=\"100\" name=\"pronouns\" {...registerEdit(\"pronouns\")} defaultValue={editPronouns} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Avatar url:</BS.Form.Label> \r\n                  <BS.Form.Control type=\"url\" name=\"avatar_url\" {...registerEdit(\"avatar_url\")}  defaultValue={avatar} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Banner url:</BS.Form.Label> \r\n                  <BS.Form.Control type=\"url\" name=\"banner\" {...registerEdit(\"banner\")}  defaultValue={banner} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Color:</BS.Form.Label> \r\n                   <BS.Form.Control  pattern=\"[A-Fa-f0-9]{6}\" name=\"color\" {...registerEdit(\"color\")} defaultValue={color} />\r\n                    <BS.Form.Text>(hexcode)</BS.Form.Text>\r\n                </BS.Col>\r\n            </BS.Form.Row>\r\n            <BS.Form.Group className=\"mt-3\">\r\n                <BS.Form.Label>Description:</BS.Form.Label><br/>\r\n                { localStorage.getItem('template1') ? <BS.Button className=\"mb-2\" size=\"sm\" variant=\"primary\" onClick={() => setValue('description', localStorage.getItem('template1'))}>Template 1</BS.Button> : \"\"} { localStorage.getItem('template2') ? <BS.Button className=\"mb-2\" size=\"sm\" variant=\"primary\" onClick={() => setValue('description', localStorage.getItem('template2'))}>Template 2</BS.Button> : \"\"} { localStorage.getItem('template3') ? <BS.Button className=\"mb-2\" size=\"sm\" variant=\"primary\" onClick={() => setValue('description', localStorage.getItem('template3'))}>Template 3</BS.Button> : \"\"}\r\n                <BS.Form.Control maxLength=\"1000\" as=\"textarea\" name=\"description\" {...registerEdit(\"description\")} defaultValue={editDesc}/>\r\n            </BS.Form.Group>\r\n            <BS.Button variant=\"light\" onClick={() => setEditMode(false)}>Cancel</BS.Button> <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button> <BS.Button variant=\"danger\" className=\"float-right\" onClick={() => setOpen(o => !o)}>Delete</BS.Button>\r\n            </BS.Form>\r\n                   <Popup open={open} position=\"top-center\" modal>\r\n                       <BS.Container>\r\n                       <BS.Card>\r\n                           <BS.Card.Header>\r\n                               <h5><FaTrashAlt className=\"mr-3\"/> Are you sure you want to delete {member.name}?</h5>\r\n                           </BS.Card.Header>\r\n                           <BS.Card.Body>\r\n                             { wrongID ? <BS.Alert variant=\"danger\">Incorrect ID, please check the spelling.</BS.Alert> : \"\" }\r\n                               <p>If you're sure you want to delete this member, please enter the member ID ({member.id}) below.</p>\r\n                               <BS.Form id='Delete' onSubmit={handleSubmitDelete(deleteMember)}>\r\n                                   <BS.Form.Label>Member ID:</BS.Form.Label>\r\n                                   <BS.Form.Control className=\"mb-4\" name=\"memberID\" {...registerDelete(\"memberID\", {required: true})} placeholder={member.id} />\r\n                                   <BS.Button variant=\"danger\" type=\"submit\">Delete</BS.Button> <BS.Button variant=\"light\" className=\"float-right\" onClick={closeModal}>Cancel</BS.Button>\r\n                               </BS.Form>\r\n                           </BS.Card.Body>\r\n                       </BS.Card>\r\n                       </BS.Container>\r\n                    </Popup></>\r\n                 :\r\n            <>\r\n            <BS.Row>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>ID:</b> {member.id}</BS.Col>\r\n                { member.display_name ? localStorage.getItem('twemoji') ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><Twemoji options={{ className: 'twemoji' }}><b>Display name: </b>{displayName}</Twemoji></BS.Col> :\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Display name:</b> {displayName}</BS.Col> : \"\" }\r\n                { member.birthday ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Birthday:</b> {birthday}</BS.Col> : \"\" }\r\n                { member.pronouns ?  localStorage.getItem('twemoji') ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><Twemoji options={{ className: 'twemoji' }}><b>Pronouns:</b> <span dangerouslySetInnerHTML={{__html: pronouns}}></span></Twemoji></BS.Col> : \r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Pronouns:</b> <span dangerouslySetInnerHTML={{__html: pronouns}}></span></BS.Col> : \"\" }\r\n                { member.color ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Color:</b> {color}</BS.Col> : \"\" }\r\n                { privacyView ? \"\" : proxyView ? \"\" : <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Privacy:</b> <BS.Button variant=\"light\" size=\"sm\" onClick={() => setPrivacyView(true)}>View</BS.Button></BS.Col> }\r\n                { privacyView ? \"\" : proxyView ? \"\" : <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Proxy tags:</b> <BS.Button variant=\"light\" size=\"sm\" onClick={() => setProxyView(true)}>View</BS.Button></BS.Col> }\r\n                { privacyView || proxyView || !member.banner ? \"\" : \r\n                    <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                    <b>Banner:</b>{\" \"}\r\n                    <Popup\r\n                      trigger={\r\n                        <BS.Button\r\n                      variant=\"light\"\r\n                      size=\"sm\"\r\n                    >\r\n                      View\r\n                    </BS.Button>\r\n                      }\r\n                      className=\"banner\"\r\n                      modal\r\n                    >\r\n                      {(close) => (\r\n                        <div className=\"text-center w-100\" onClick={() => close()}>\r\n                            <div className=\"m-auto\" style={{maxWidth: '100%'}}>\r\n                                <BS.Image src={`${banner}`} style={{maxWidth: 'auto', maxHeight: '640px'}} thumbnail />\r\n                            </div>\r\n                        </div>\r\n                      )}\r\n                    </Popup>\r\n                    </BS.Col>\r\n                   }\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Created:</b> {created}</BS.Col>\r\n            </BS.Row>\r\n            { privacyEdit ? <BS.Form id='Privacy' onSubmit={handleSubmitPrivacy(submitPrivacy)}>\r\n                <hr/>\r\n                <h5>Editing privacy settings</h5>\r\n                    <BS.Form.Row>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                        <BS.Form.Label>Visibility:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"visibility\" defaultValue={member.visibility} as=\"select\" {...registerPrivacy(\"visibility\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Name:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"name_privacy\" defaultValue={member.name_privacy} as=\"select\" {...registerPrivacy(\"name_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Description:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"description_privacy\" defaultValue={member.description_privacy} as=\"select\" {...registerPrivacy(\"description_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Avatar:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"avatar_privacy\" defaultValue={member.avatar_privacy} as=\"select\" {...registerPrivacy(\"avatar_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Birthday:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"birthday_privacy\" defaultValue={member.birthday_privacy} as=\"select\" {...registerPrivacy(\"birthday_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Pronouns:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"pronoun_privacy\" defaultValue={member.pronoun_privacy} as=\"select\" {...registerPrivacy(\"pronoun_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-3\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Meta:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"metadata_privacy\" defaultValue={member.metadata_privacy} as=\"select\" {...registerPrivacy(\"metadata_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                </BS.Form.Row>\r\n                <BS.Button variant=\"light\" onClick={() => setprivacyEdit(false)}>Cancel</BS.Button> <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button>                \r\n                <hr/>\r\n            </BS.Form> : privacyView ? <><hr/>\r\n                <h5>Viewing privacy settings</h5>\r\n            <BS.Row>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Visibility:</b> {member.visibility}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Name: </b>{member.name_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Description:</b> {member.description_privacy}</BS.Col> \r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Avatar:</b> {member.avatar_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Birthday:</b> {member.birthday_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Pronouns:</b> {member.pronoun_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-3\" xs={12} lg={3}><b>Meta:</b> {member.metadata_privacy}</BS.Col>\r\n            </BS.Row>\r\n         <BS.Button variant=\"light\" onClick={() => setPrivacyView(false)}>Exit</BS.Button>  <BS.Button variant=\"primary\" onClick={() => setprivacyEdit(true)}>Edit</BS.Button>\r\n         <hr/></> : \"\" }\r\n         { proxyEdit ?\r\n         <><hr/>\r\n         <h5>Editing proxy tags</h5>\r\n         <BS.Form onSubmit={handleSubmitProxy(submitProxy)}>\r\n             <BS.Form.Row>\r\n                { proxyTags.map((item, index) => (\r\n                    <BS.Col key={index} className=\"mb-lg-2\" xs={12} lg={3}>\r\n                        <BS.Form.Row>\r\n                        <BS.InputGroup className=\"ml-1 mr-1 mb-1\">\r\n                        <BS.Form.Control as=\"textarea\" rows=\"1\" name={`proxy_tags[${index}].prefix`} defaultValue={item.prefix} {...registerProxy(`proxy_tags[${index}].prefix`)}/> \r\n                        <BS.Form.Control as=\"textarea\" rows=\"1\" disabled placeholder='text'/>\r\n                        <BS.Form.Control as=\"textarea\" rows=\"1\" name={`proxy_tags[${index}].suffix`} defaultValue={item.suffix} {...registerProxy(`proxy_tags[${index}].suffix`)}/>\r\n                        </BS.InputGroup>\r\n                        </BS.Form.Row>\r\n                    </BS.Col>\r\n                ))} <BS.Col className=\"mb-2\" xs={12} lg={3}><BS.Button block variant=\"light\" onClick={() => addProxyField()}>Add new</BS.Button></BS.Col>\r\n             </BS.Form.Row>\r\n             <BS.Button variant=\"light\" onClick={() => resetProxyFields()}>Exit</BS.Button> <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button>\r\n        </BS.Form><hr/></> : proxyView ? \r\n         <><hr/>\r\n             <h5>Viewing proxy tags</h5>\r\n         <BS.Row className=\"mb-2\">\r\n          { proxyTags.length === 0 ? <BS.Col className=\"mb-lg-2\"><b>No proxy tags set.</b></BS.Col> : proxyTags.map((proxytag, index) => <BS.Col key={index} className=\"mb-lg-2\" xs={12} lg={2}> <code>{proxytag.prefix}text{proxytag.suffix}</code></BS.Col> )}\r\n         </BS.Row>\r\n         <BS.Button variant=\"light\" onClick={() => setProxyView(false)}>Exit</BS.Button>  <BS.Button variant=\"primary\" onClick={() => setproxyEdit(true)}>Edit</BS.Button>\r\n            <hr/></> : \"\" }\r\n            <p><b>Description:</b></p>\r\n            { localStorage.getItem('twemoji') ? <Twemoji options={{ className: 'twemoji' }}><p dangerouslySetInnerHTML={{__html: desc}}></p></Twemoji> : <p dangerouslySetInnerHTML={{__html: desc}}></p>}\r\n            { !member.banner || !localStorage.getItem(\"bottombanners\") ? \"\" : \r\n              <BS.Image rounded className=\"mb-2\" style={{width: '100%', maxHeight: '15rem', objectFit: 'cover'}} src={banner}/>\r\n            }\r\n                { proxyView ? \"\" : privacyEdit ? \"\" : privacyView ? \"\" : <><BS.Button variant=\"light\" onClick={() => setEditMode(true)}>Edit</BS.Button> <Link to={`dash/${member.id}`}><BS.Button variant=\"primary\" className=\"float-right\">View page</BS.Button></Link></> }\r\n            </> } </BS.Card.Body>\r\n        )\r\n    }\r\n\r\n    return (\r\n       memberDeleted ? <BS.Card.Header className=\"d-flex align-items-center justify-content-between\"><BS.Button variant=\"link\" className=\"float-left\"><FaTrashAlt className=\"mr-4\"/>Member Deleted</BS.Button></BS.Card.Header> :\r\n       <LazyLoad offset={100}>\r\n           <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n        <div> { member.visibility === 'public' ? <BS.OverlayTrigger placement=\"left\" overlay={ \r\n            <BS.Tooltip>\r\n                Copy public link\r\n            </BS.Tooltip>\r\n        }><BS.Button variant=\"link\" onClick={() => copyLink()}><FaLink style={{fontSize: '1.25rem'}}/></BS.Button></BS.OverlayTrigger> : \r\n        <BS.Button variant=\"link\"><FaLock style={{fontSize: '1.25rem'}} /></BS.Button> }\r\n        { localStorage.getItem('pagesonly') ? \r\n        <Link to={`dash/${member.id}`}><BS.Button variant=\"link\" className=\"float-left\"><b>{member.name}</b> ({member.id})</BS.Button></Link>\r\n        : <BS.Accordion.Toggle  as={BS.Button} variant=\"link\" eventKey={member.id}> <b>{member.name}</b> ({member.id})</BS.Accordion.Toggle>}</div>\r\n            { member.avatar_url ?   <Popup trigger={<BS.Image src={`${member.avatar_url}`} style={{width: 50, height: 50}} tabIndex=\"0\" className=\"float-right\" roundedCircle />} className=\"avatar\" modal>\r\n                {close => (\r\n                    <div className=\"text-center w-100 m-0\" onClick={() => close()}>\r\n                        <div className=\"m-auto\" style={{maxWidth: '640px'}}>\r\n                            <BS.Image src={`${avatar}`} style={{'maxWidth': '100%', height: 'auto'}} thumbnail />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </Popup> : \r\n        <BS.Image src={defaultAvatar} style={{width: 50, height: 50}} tabIndex=\"0\" className=\"float-right\" roundedCircle />}\r\n        </BS.Card.Header>\r\n        {localStorage.getItem(\"expandcards\") ? renderCard() : <BS.Accordion.Collapse eventKey={member.id}>\r\n            {renderCard()}\r\n        </BS.Accordion.Collapse>}\r\n        </LazyLoad>\r\n        \r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport  * as BS from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\";\r\nimport moment from 'moment';\r\nimport Popup from 'reactjs-popup';\r\nimport 'reactjs-popup/dist/index.css';\r\nimport autosize from 'autosize';\r\nimport Twemoji from 'react-twemoji';\r\n\r\nimport API_URL from \"../../Constants/constants.js\";\r\nimport history from \"../../History.js\";\r\n\r\nimport defaultAvatar from '../../default_discord_avatar.png'\r\nimport { FaLink, FaLock, FaTrashAlt } from \"react-icons/fa\";\r\n\r\nexport default function MemberPage(props) {\r\n\r\n    const [ member, setMember] = useState(props.member);\r\n    const system = JSON.parse(localStorage.getItem('user'));\r\n    const sysID = system.id;\r\n\r\n    const [ displayName, setDisplayName ] = useState(\"\");\r\n    const [ birthday, setBirthday ] = useState(\"\");\r\n    const [ birthdate, setBirthdate ] = useState(\"\");\r\n    const [ created, setCreated ] = useState(\"\");\r\n    const [ pronouns, setPronouns ] = useState(\"\");\r\n    const [ editPronouns, setEditPronouns ] = useState(\"\");\r\n    const [ avatar, setAvatar ] = useState(\"\");\r\n    const [ banner, setBanner ] = useState(\"\");\r\n    const [ color, setColor ] = useState(\"\");\r\n    const [ desc, setDesc ] = useState(\"\");\r\n    const [ editDesc, setEditDesc ] = useState(\"\");\r\n    const [ proxyTags, setProxyTags ] = useState(member.proxy_tags);\r\n\r\n    const [ editMode, setEditMode ] = useState(false);\r\n    const [ privacyMode, setPrivacyMode ] = useState(false);\r\n    const [ privacyView, setPrivacyView ] = useState(false);\r\n    const [ proxyView, setProxyView ] = useState(false);\r\n    const [ proxyMode, setProxyMode ] = useState(false);\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const closeModal = () => setOpen(false);\r\n\r\n    const [ errorAlert, setErrorAlert ] = useState(false);\r\n    const [ wrongID, setWrongID ] = useState(false);\r\n    const [ memberDeleted, setMemberDeleted ] = useState(false);\r\n\r\n    const {\r\n        register: registerEdit,\r\n        handleSubmit: handleSubmitEdit,\r\n        setValue\r\n      } = useForm();\r\n\r\n    const {\r\n        register: registerPrivacy,\r\n        handleSubmit: handleSubmitPrivacy\r\n      } = useForm();\r\n\r\n    const {\r\n        register: registerDelete,\r\n        handleSubmit: handleSubmitDelete\r\n      } = useForm();\r\n  \r\n      const {\r\n        register: registerProxy,\r\n        handleSubmit: handleSubmitProxy,\r\n        } = useForm();\r\n\r\n        useEffect(() => {\r\n            autosize(document.querySelectorAll('textarea'));\r\n        })\r\n\r\n    useEffect(() => {\r\n        const { toHTML } = require('../../Functions/discord-parser.js');\r\n\r\n        if (member.display_name) {\r\n            setDisplayName(member.display_name)\r\n        } else setDisplayName('')\r\n\r\n        if (member.birthday) { \r\n            setBirthdate(member.birthday)\r\n            if (member.birthday.startsWith('0004-')) {\r\n                var bdaymoment = moment(member.birthday, 'YYYY-MM-DD').format('MMM D');\r\n                setBirthday(bdaymoment);\r\n            } else {\r\n                var birthdaymoment =  moment(member.birthday, 'YYYY-MM-DD').format('MMM D, YYYY');\r\n                setBirthday(birthdaymoment);\r\n            }\r\n        } else { setBirthday('');\r\n        setBirthdate('');\r\n    }\r\n\r\n        var createdmoment = moment(member.created).format('MMM D, YYYY');\r\n        setCreated(createdmoment);\r\n\r\n\r\n        if (member.pronouns) {\r\n            setPronouns(toHTML(member.pronouns));\r\n            setEditPronouns(member.pronouns);\r\n        } else { setPronouns('');\r\n        setEditPronouns('');\r\n    }\r\n\r\n        if (member.avatar_url) {\r\n            var avatarsmall = member.avatar_url.replace('&format=jpeg', '');\r\n            setAvatar(avatarsmall.replace('?width=256&height=256', ''))\r\n        } else setAvatar('')\r\n\r\n        if (member.banner) {\r\n            setBanner(member.banner);\r\n          } else setBanner(\"\");\r\n        \r\n        if (member.color) {\r\n            setColor(member.color);\r\n        } else setColor('');\r\n\r\n        if (member.description) {\r\n            setDesc(toHTML(member.description));\r\n            setEditDesc(member.description);\r\n        } else { setDesc(\"(no description)\");\r\n        setEditDesc(\"\");\r\n    }\r\n    }, [member.description, member.color, member.birthday, member.display_name, member.pronouns, member.avatar_url, member.proxy_tags, member.created, member.banner]);\r\n\r\n    const submitEdit = data => {\r\n        props.edit(Object.assign(member, data));\r\n\r\n        fetch(`${API_URL}m/${member.id}`,{\r\n            method: 'PATCH',\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': localStorage.getItem(\"token\")\r\n            }}).then (res => res.json()\r\n            ).then (data => { \r\n                setMember(prevState => {return {...prevState, ...data}});\r\n                setErrorAlert(false);\r\n                setEditMode(false);\r\n        }\r\n            ).catch (error => {\r\n                console.error(error);\r\n                setErrorAlert(true);\r\n            });\r\n    }\r\n\r\n    const submitPrivacy = data => {\r\n        props.edit(Object.assign(member, data));\r\n        \r\n        fetch(`${API_URL}m/${member.id}`,{\r\n            method: 'PATCH',\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': localStorage.getItem(\"token\")\r\n            }}).then (res => res.json()\r\n            ).then (data => {\r\n                setMember(prevState => {return {...prevState, ...data}});\r\n                setErrorAlert(false); \r\n                setPrivacyMode(false)\r\n        }\r\n            ).catch (error => {\r\n                console.error(error);\r\n                setErrorAlert(true);\r\n             })\r\n    }\r\n\r\n    const deleteMember = data => {\r\n        if (data.memberID !== member.id) {\r\n        setWrongID(true);\r\n        } else {\r\n            fetch(`${API_URL}m/${member.id}`,{\r\n                method: 'DELETE',\r\n                headers: {\r\n                'Authorization': localStorage.getItem(\"token\")\r\n                }}).then (() => {\r\n                    setErrorAlert(false);\r\n                    setMemberDeleted(true);\r\n                })\r\n                .catch (error => {\r\n                    console.error(error);\r\n                    setErrorAlert(true);\r\n                })\r\n        }\r\n    }\r\n\r\n    function addProxyField() {\r\n        setProxyTags(oldTags => [...oldTags, {prefix: '', suffix: ''}] )\r\n    }\r\n\r\n    function resetProxyFields() {\r\n        setProxyMode(false);\r\n        setProxyTags(member.proxy_tags);\r\n    }\r\n\r\n    const submitProxy = data => {\r\n\r\n        const newdata = {proxy_tags: data.proxy_tags.filter(tag => !(tag.prefix === \"\" && tag.suffix === \"\"))}\r\n        props.edit(Object.assign(member, newdata));\r\n\r\n        fetch(`${API_URL}m/${member.id}`,{\r\n            method: 'PATCH',\r\n            body: JSON.stringify(newdata),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': localStorage.getItem(\"token\")\r\n            }}).then (res => res.json()\r\n            ).then (data => { \r\n                setMember(prevState => {return {...prevState, ...data}}); \r\n                setProxyTags(data.proxy_tags); \r\n                setErrorAlert(false)\r\n                setProxyMode(false);\r\n        }\r\n            ).catch (error => {\r\n                console.error(error);\r\n                setErrorAlert(true);\r\n            });\r\n    }\r\n\r\n    function copyLink() {\r\n        var link = `https://pk-webs.spectralitree.com/profile/${sysID}/${member.id}`\r\n        var textField = document.createElement('textarea')\r\n        textField.innerText = link\r\n        document.body.appendChild(textField);\r\n\r\n        textField.select();\r\n        textField.setSelectionRange(0, 99999);\r\n        document.execCommand('copy');\r\n\r\n        document.body.removeChild(textField);\r\n    }\r\n\r\n    return (\r\n        memberDeleted ? <BS.Card className=\"mb-5\"><BS.Card.Header className=\"d-flex align-items-center justify-content-between\"><BS.Button variant=\"link\" className=\"float-left\"><FaTrashAlt className=\"mr-4\"/>Member Deleted</BS.Button></BS.Card.Header>\r\n        <BS.Card.Body>\r\n            Member successfully deleted, click the button below to go back to the dash.\r\n            <BS.Button variant=\"primary\" className=\"float-right\" onClick={() => history.push(\"/dash/reload\")}>Back</BS.Button>\r\n        </BS.Card.Body></BS.Card> :\r\n        <>\r\n        { localStorage.getItem('colorbg') && member.color ? \"\" : <><div className=\"backdrop\" style={{backgroundColor: `#${color}`}}/>\r\n        { !localStorage.getItem('fullbg') ? <div className=\"backdrop-overlay\"/> : \"\" }</> }\r\n        { member.banner && !localStorage.getItem(\"hidebanners\") ? <div className=\"banner\" style={{backgroundImage: `url(${banner})`}} alt=\"\"/> : \"\"}\r\n        <BS.Card className=\"mb-5\">\r\n        <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n        <div> { member.visibility === 'public' ? <BS.OverlayTrigger placement=\"left\" overlay={ \r\n            <BS.Tooltip>\r\n                Copy public link\r\n            </BS.Tooltip>\r\n        }><BS.Button variant=\"link\" onClick={() => copyLink()}><FaLink style={{fontSize: '1.25rem'}}/></BS.Button></BS.OverlayTrigger> : <BS.Button variant=\"link\"><FaLock style={{fontSize: '1.25rem'}} /></BS.Button> }<BS.Button variant=\"link\" ><b>{member.name}</b> ({member.id})</BS.Button> </div> \r\n            { member.avatar_url ?   <Popup trigger={<BS.Image src={`${member.avatar_url}`} style={{width: 50, height: 50}} tabIndex=\"0\" className=\"float-right\" roundedCircle />} className=\"avatar\" modal>\r\n                {close => (\r\n                  <div className=\"text-center w-100 m-0\" onClick={() => close()}>\r\n                    <div className=\"m-auto\" style={{maxWidth: '640px'}}>\r\n                        <BS.Image src={`${avatar}`} style={{'maxWidth': '100%', height: 'auto'}} thumbnail />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n            </Popup> : \r\n        <BS.Image src={defaultAvatar} style={{width: 50, height: 50}} tabIndex=\"0\" className=\"float-right\" roundedCircle />}\r\n        </BS.Card.Header>\r\n                <BS.Card.Body style={{ borderLeft: localStorage.getItem('colorbg') ? `5px solid #${color}` : ''}}>\r\n                { errorAlert ? <BS.Alert variant=\"danger\">Something went wrong, please try logging in and out again.</BS.Alert> : \"\" }\r\n                { editMode ?\r\n                <>\r\n                <BS.Form id='Edit' onSubmit={handleSubmitEdit(submitEdit)}>\r\n                <BS.Form.Row>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Name:</BS.Form.Label>\r\n                   <BS.Form.Control name=\"name\" {...registerEdit(\"name\")} defaultValue={member.name} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Display name: </BS.Form.Label>\r\n                    <BS.Form.Control name=\"display_name\" {...registerEdit(\"display_name\")}  defaultValue={displayName} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Birthday:</BS.Form.Label>\r\n                    <BS.Form.Control  pattern=\"^\\d{4}\\-(0[1-9]|1[012])\\-(0[1-9]|[12][0-9]|3[01])$\" name=\"birthday\" {...registerEdit(\"birthday\")}  defaultValue={birthdate}/>\r\n                    <BS.Form.Text>(YYYY-MM-DD)</BS.Form.Text>\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Pronouns:</BS.Form.Label>\r\n                    <BS.Form.Control maxLength=\"100\" name=\"pronouns\" {...registerEdit(\"pronouns\")} defaultValue={editPronouns} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Avatar url:</BS.Form.Label> \r\n                  <BS.Form.Control type=\"url\" name=\"avatar_url\" {...registerEdit(\"avatar_url\")}  defaultValue={avatar} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Banner url:</BS.Form.Label> \r\n                  <BS.Form.Control type=\"url\" name=\"banner\" {...registerEdit(\"banner\")}  defaultValue={banner} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Color:</BS.Form.Label> \r\n                   <BS.Form.Control  pattern=\"[A-Fa-f0-9]{6}\" name=\"color\" {...registerEdit(\"color\")} defaultValue={color} />\r\n                    <BS.Form.Text>(hexcode)</BS.Form.Text>\r\n                </BS.Col>\r\n            </BS.Form.Row>\r\n            <BS.Form.Group className=\"mt-3\">\r\n                <BS.Form.Label>Description:</BS.Form.Label><br/>\r\n                { localStorage.getItem('template1') ? <BS.Button className=\"mb-2\" size=\"sm\" variant=\"primary\" onClick={() => setValue('description', localStorage.getItem('template1'))}>Template 1</BS.Button> : \"\"} { localStorage.getItem('template2') ? <BS.Button className=\"mb-2\" size=\"sm\" variant=\"primary\" onClick={() => setValue('description', localStorage.getItem('template2'))}>Template 2</BS.Button> : \"\"} { localStorage.getItem('template3') ? <BS.Button className=\"mb-2\" size=\"sm\" variant=\"primary\" onClick={() => setValue('description', localStorage.getItem('template3'))}>Template 3</BS.Button> : \"\"}\r\n                <BS.Form.Control maxLength=\"1000\" as=\"textarea\" name=\"description\" {...registerEdit(\"description\")} defaultValue={editDesc}/>\r\n            </BS.Form.Group>\r\n            <BS.Button variant=\"light\" onClick={() => setEditMode(false)}>Cancel</BS.Button> <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button> <BS.Button variant=\"danger\" className=\"float-right\" onClick={() => setOpen(o => !o)}>Delete</BS.Button>\r\n            </BS.Form>\r\n                   <Popup open={open} position=\"top-center\" modal>\r\n                       <BS.Container>\r\n                       <BS.Card>\r\n                           <BS.Card.Header>\r\n                               <h5><FaTrashAlt className=\"mr-3\"/> Are you sure you want to delete {member.name}?</h5>\r\n                           </BS.Card.Header>\r\n                           <BS.Card.Body>\r\n                             { wrongID ? <BS.Alert variant=\"danger\">Incorrect ID, please check the spelling.</BS.Alert> : \"\" }\r\n                               <p>If you're sure you want to delete this member, please enter the member ID ({member.id}) below.</p>\r\n                               <BS.Form id='Delete' onSubmit={handleSubmitDelete(deleteMember)}>\r\n                                   <BS.Form.Label>Member ID:</BS.Form.Label>\r\n                                   <BS.Form.Control className=\"mb-4\" name=\"memberID\" {...registerDelete(\"memberID\", {required: true})} placeholder={member.id} />\r\n                                   <BS.Button variant=\"danger\" type=\"submit\">Delete</BS.Button> <BS.Button variant=\"light\" className=\"float-right\" onClick={closeModal}>Cancel</BS.Button>\r\n                               </BS.Form>\r\n                           </BS.Card.Body>\r\n                       </BS.Card>\r\n                       </BS.Container>\r\n                    </Popup></>\r\n                 :\r\n            <>\r\n            <BS.Row>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>ID:</b> {member.id}</BS.Col>\r\n                { member.display_name ? localStorage.getItem('twemoji') ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><Twemoji options={{ className: 'twemoji' }}><b>Display name: </b>{displayName}</Twemoji></BS.Col> :\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Display name:</b> {displayName}</BS.Col> : \"\" }\r\n                { member.birthday ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Birthday:</b> {birthday}</BS.Col> : \"\" }\r\n                { member.pronouns ?  localStorage.getItem('twemoji') ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><Twemoji options={{ className: 'twemoji' }}><b>Pronouns:</b> <span dangerouslySetInnerHTML={{__html: pronouns}}></span></Twemoji></BS.Col> : \r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Pronouns:</b> <span dangerouslySetInnerHTML={{__html: pronouns}}></span></BS.Col> : \"\" }\r\n                { member.color ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Color:</b> {color}</BS.Col> : \"\" }\r\n                { privacyView ? \"\" : proxyView ? \"\" : <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Privacy:</b> <BS.Button variant=\"light\" size=\"sm\" onClick={() => setPrivacyView(true)}>View</BS.Button></BS.Col> }\r\n                { privacyView ? \"\" : proxyView ? \"\" : <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Proxy tags:</b> <BS.Button variant=\"light\" size=\"sm\" onClick={() => setProxyView(true)}>View</BS.Button></BS.Col> }\r\n                { privacyView || proxyView || !member.banner ? \"\" : \r\n                    <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                    <b>Banner:</b>{\" \"}\r\n                    <Popup\r\n                      trigger={\r\n                        <BS.Button\r\n                      variant=\"light\"\r\n                      size=\"sm\"\r\n                    >\r\n                      View\r\n                    </BS.Button>\r\n                      }\r\n                      className=\"banner\"\r\n                      modal\r\n                    >\r\n                      {(close) => (\r\n                        <div className=\"text-center w-100\" onClick={() => close()}>\r\n                            <div className=\"m-auto\" style={{maxWidth: '100%'}}>\r\n                                <BS.Image src={`${banner}`} style={{maxWidth: 'auto', maxHeight: '640px'}} thumbnail />\r\n                            </div>\r\n                        </div>\r\n                      )}\r\n                    </Popup>\r\n                    </BS.Col>\r\n                   }\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Created:</b> {created}</BS.Col>\r\n            </BS.Row>\r\n            { privacyMode ? <BS.Form id='Privacy' onSubmit={handleSubmitPrivacy(submitPrivacy)}>\r\n                <hr/>\r\n                <h5>Editing privacy settings</h5>\r\n                <BS.Form.Row>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                        <BS.Form.Label>Visibility:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"visibility\" defaultValue={member.visibility} as=\"select\" {...registerPrivacy(\"visibility\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Name:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"name_privacy\" defaultValue={member.name_privacy} as=\"select\" {...registerPrivacy(\"name_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Description:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"description_privacy\" defaultValue={member.description_privacy} as=\"select\" {...registerPrivacy(\"description_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Avatar:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"avatar_privacy\" defaultValue={member.avatar_privacy} as=\"select\" {...registerPrivacy(\"avatar_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Birthday:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"birthday_privacy\" defaultValue={member.birthday_privacy} as=\"select\" {...registerPrivacy(\"birthday_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Pronouns:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"pronoun_privacy\" defaultValue={member.pronoun_privacy} as=\"select\" {...registerPrivacy(\"pronoun_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-3\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Meta:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"metadata_privacy\" defaultValue={member.metadata_privacy} as=\"select\" {...registerPrivacy(\"metadata_privacy\")}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                </BS.Form.Row>\r\n                <BS.Button variant=\"light\" onClick={() => setPrivacyMode(false)}>Cancel</BS.Button> <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button>                \r\n                <hr/>\r\n            </BS.Form> : privacyView ? <><hr/>\r\n                <h5>Viewing privacy settings</h5>\r\n            <BS.Row>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Visibility:</b> {member.visibility}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Name: </b>{member.name_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Description:</b> {member.description_privacy}</BS.Col> \r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Avatar:</b> {member.avatar_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Birthday:</b> {member.birthday_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Pronouns:</b> {member.pronoun_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-3\" xs={12} lg={3}><b>Meta:</b> {member.metadata_privacy}</BS.Col>\r\n            </BS.Row>\r\n         <BS.Button variant=\"light\" onClick={() => setPrivacyView(false)}>Exit</BS.Button>  <BS.Button variant=\"primary\" onClick={() => setPrivacyMode(true)}>Edit</BS.Button>\r\n         <hr/></> : \"\" }\r\n         { proxyMode ?\r\n         <><hr/>\r\n         <h5>Editing proxy tags</h5>\r\n         <BS.Form onSubmit={handleSubmitProxy(submitProxy)}>\r\n             <BS.Form.Row>\r\n                { proxyTags.map((item, index) => (\r\n                    <BS.Col key={index} className=\"mb-lg-2\" xs={12} lg={2}>\r\n                        <BS.Form.Row>\r\n                        <BS.InputGroup className=\"ml-1 mr-1 mb-1\">\r\n                        <BS.Form.Control as=\"textarea\" rows=\"1\" name={`proxy_tags[${index}].prefix`} defaultValue={item.prefix} {...registerProxy(`proxy_tags[${index}].prefix`)}/> \r\n                        <BS.Form.Control as=\"textarea\" rows=\"1\" disabled placeholder='text'/>\r\n                        <BS.Form.Control as=\"textarea\" rows=\"1\" name={`proxy_tags[${index}].suffix`} defaultValue={item.suffix} {...registerProxy(`proxy_tags[${index}].suffix`)}/>\r\n                        </BS.InputGroup>\r\n                        </BS.Form.Row>\r\n                    </BS.Col>\r\n                ))} <BS.Col className=\"mb-2\" xs={12} lg={3}><BS.Button block variant=\"light\" onClick={() => addProxyField()}>Add new</BS.Button></BS.Col>\r\n             </BS.Form.Row>\r\n             <BS.Button variant=\"light\" onClick={() => resetProxyFields()}>Exit</BS.Button> <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button>\r\n        </BS.Form><hr/></> : proxyView ? \r\n         <><hr/>\r\n             <h5>Viewing proxy tags</h5>\r\n         <BS.Row className=\"mb-2\">\r\n          { proxyTags.length === 0 ? <BS.Col className=\"mb-lg-2\"><b>No proxy tags set.</b></BS.Col> : proxyTags.map((proxytag, index) => <BS.Col key={index} className=\"mb-lg-2\" xs={12} lg={2}> <code>{proxytag.prefix}text{proxytag.suffix}</code></BS.Col> )}\r\n         </BS.Row>\r\n         <BS.Button variant=\"light\" onClick={() => setProxyView(false)}>Exit</BS.Button>  <BS.Button variant=\"primary\" onClick={() => setProxyMode(true)}>Edit</BS.Button>\r\n            <hr/></> : \"\" }\r\n            <p><b>Description:</b></p>\r\n            { localStorage.getItem('twemoji') ? <Twemoji options={{ className: 'twemoji' }}><p dangerouslySetInnerHTML={{__html: desc}}></p></Twemoji> : <p dangerouslySetInnerHTML={{__html: desc}}></p>}\r\n            { !member.banner || !localStorage.getItem(\"bottombanners\") ? \"\" : \r\n              <BS.Image rounded className=\"mb-2\" style={{width: '100%', maxHeight: '15rem', objectFit: 'cover'}} src={banner}/>\r\n            }\r\n                { proxyView ? \"\" : privacyMode ? \"\" : privacyView ? \"\" : <><BS.Button variant=\"light\" onClick={() => setEditMode(true)}>Edit</BS.Button> <Link to=\"/dash\" ><BS.Button variant=\"primary\" className=\"float-right\">Back</BS.Button></Link></>}\r\n            </> } </BS.Card.Body></BS.Card></>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport * as BS from 'react-bootstrap';\r\nimport { useParams } from \"react-router-dom\";\r\nimport MemberPage from '../Components/Private/MemberPage.js'\r\n\r\nexport default function MemberPages(props) {\r\n    const { memberID } = useParams();\r\n    \r\n    \r\n    const memberpages = props.members.filter((member) => member.id === memberID)\r\n    const memberpage = memberpages.map((member) => <MemberPage key={member.id} member={member} edit={props.edit}/>)\r\n    const noMatch = memberpages.length === 0;\r\n\r\n    if (noMatch) return (\r\n        <BS.Alert variant=\"danger\">You do not have a member with the ID '{memberID}' in your system. Please check the ID again.</BS.Alert>\r\n    )\r\n\r\n    return (\r\n        <>\r\n            {memberpage}\r\n        </>\r\n    )\r\n}","import React from 'react';\r\nimport  * as BS from 'react-bootstrap'\r\n\r\nexport default function Loading() {\r\n    return (\r\n        <BS.Container fluid className=\"text-center\"><BS.Spinner animation=\"border\" /></BS.Container>\r\n    )\r\n}","import React, { useEffect, useState, useCallback } from 'react';\r\nimport { useRouteMatch, Switch, Route } from \"react-router-dom\";\r\nimport  * as BS from 'react-bootstrap'\r\nimport Popup from 'reactjs-popup';\r\nimport 'reactjs-popup/dist/index.css';\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nimport MemberCard from './MemberCard.js'\r\nimport MemberPages from '../../Pages/MemberPages.js'\r\nimport Loading from \"../Loading.js\";\r\nimport API_URL from \"../../Constants/constants.js\";\r\n\r\nimport { FaPlus } from \"react-icons/fa\";\r\n\r\nexport default function Memberlist() {\r\n\r\n    const { path } = useRouteMatch();\r\n    \r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    const userId = user.id;\r\n\r\n    const [isLoading, setIsLoading ] = useState(false);\r\n    const [isError, setIsError ] = useState(false);\r\n    const [errorAlert, setErrorAlert ] = useState(false);\r\n\r\n    const [proxyView, setProxyView] = useState(false);\r\n    const [privacyView, setPrivacyView] = useState(false);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [membersPerPage, setMembersPerPage] = useState(25);\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const closeModal = () => setOpen(false);\r\n\r\n    const [members, setMembers ] = useState([]);\r\n\r\n    const [searchBy, setSearchBy] = useState('name')\r\n    const [privacyFilter, setPrivacyFilter] = useState('all')\r\n    const [sortBy, setSortBy] = useState('name')\r\n    const [sortOrder, setSortOrder] = useState('ascending')\r\n\r\n    const [value, setValue] = useState('');\r\n    const [proxyTags, setProxyTags] = useState([{\r\n      prefix: \"\", suffix: \"\"\r\n    }]);\r\n\r\n    const {register, handleSubmit, setValue: setTemplate} = useForm();\r\n\r\n  const fetchMembers = useCallback( () => {\r\n    setIsLoading(true);\r\n    setIsError(false);\r\n    setMembersPerPage(localStorage.getItem(\"expandcards\") ? 10 : 25);\r\n\r\n     fetch(`${API_URL}s/${userId}/members`,{\r\n    method: 'GET',\r\n    headers: {\r\n      'Authorization': localStorage.getItem(\"token\")\r\n    }}).then ( res => res.json()\r\n    ).then (data => { \r\n      setMembers(data)\r\n      setIsLoading(false);\r\n  })\r\n    .catch (error => { \r\n        console.log(error);\r\n        setIsError(true);\r\n        setIsLoading(false);\r\n    })\r\n  }, [userId])\r\n\r\n  useEffect(() => {\r\n    fetchMembers();\r\n  }, [fetchMembers])\r\n\r\n  const indexOfLastMember = currentPage * membersPerPage;\r\n  const indexOfFirstMember = indexOfLastMember - membersPerPage;\r\n\r\n    let Members = members.map(member => {\r\n      if (member.display_name) {\r\n        return {...member, displayName: member.display_name}\r\n      } return {...member, displayName: member.name}\r\n    }) \r\n    let Members1 = Members.map(member => {\r\n      if (member.description) {\r\n        return {...member, desc: member.description}\r\n      } return {...member, desc: \"(no description)\"}\r\n    })\r\n\r\n    const currentMembers = Members1.filter(member => {\r\n      if (!value & privacyFilter === 'all') return true;\r\n      \r\n      if (privacyFilter === 'private') {\r\n        if (member.visibility !== 'private') {\r\n          return false;\r\n        }\r\n      } else if (privacyFilter === 'public') {\r\n        if (member.visibility !== 'public') {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      if (searchBy === 'name') {\r\n      if (member.name.toLowerCase().includes(value.toLowerCase())) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } else if (searchBy === 'display name') {\r\n      if (member.displayName.toLowerCase().includes(value.toLowerCase())) {\r\n        return true;\r\n      }\r\n      return false\r\n    } else if (searchBy === 'description') {\r\n      if (member.desc.toLowerCase().includes(value.toLowerCase())) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } else if (searchBy === 'ID') {\r\n      if (member.id.toLowerCase().includes(value.toLowerCase())) {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n      return false;\r\n    })\r\n\r\n    const active = currentPage;\r\n    const pageAmount = Math.ceil(currentMembers.length / membersPerPage);\r\n\r\n      var sortMembers = currentMembers;\r\n      if (sortBy === 'name') {\r\n        if (sortOrder === 'descending') {\r\n          sortMembers =  currentMembers.sort((a, b) => a.name.localeCompare(b.name)).reverse().slice(indexOfFirstMember, indexOfLastMember);\r\n        } else sortMembers =  currentMembers.sort((a, b) => a.name.localeCompare(b.name)).slice(indexOfFirstMember, indexOfLastMember);\r\n      } \r\n      else if (sortBy === 'display name') {\r\n          if (sortOrder === 'descending') {\r\n            sortMembers =  currentMembers.sort((a, b) => a.displayName.localeCompare(b.displayName)).reverse().slice(indexOfFirstMember, indexOfLastMember);\r\n          } else sortMembers =  currentMembers.sort((a, b) => a.displayName.localeCompare(b.displayName)).slice(indexOfFirstMember, indexOfLastMember);\r\n      } \r\n      else if (sortBy === 'ID') {\r\n        if (sortOrder === 'descending') {\r\n          sortMembers =  currentMembers.sort((a, b) => a.id.localeCompare(b.id)).reverse().slice(indexOfFirstMember, indexOfLastMember);\r\n        } else sortMembers =  currentMembers.sort((a, b) => a.id.localeCompare(b.id)).slice(indexOfFirstMember, indexOfLastMember);\r\n      } \r\n      else if (sortBy === 'date created') {\r\n        if (sortOrder === 'descending') {\r\n          sortMembers =  currentMembers.sort((a, b) => a.created.localeCompare(b.created)).reverse().slice(indexOfFirstMember, indexOfLastMember);\r\n        } else sortMembers =  currentMembers.sort((a, b) => a.created.localeCompare(b.created)).slice(indexOfFirstMember, indexOfLastMember);\r\n      }\r\n\r\n      const memberList = sortMembers.map((member) => <BS.Card key={member.id} className={localStorage.getItem(\"expandcards\") ? \"mb-3\" : \"\"}>\r\n      <MemberCard\r\n      member={member} \r\n      edit={memberEdit => setMembers(members.map(member => member.id === memberEdit.id ? Object.assign(member, memberEdit) : member))}\r\n      />\r\n    </BS.Card>\r\n    );\r\n\r\n    function addProxyField() {\r\n      setProxyTags(oldTags => [...oldTags, {prefix: '', suffix: ''}] )\r\n    }\r\n\r\n    const submitMember = data => {\r\n      setIsLoading(true);\r\n\r\n      const newdata = data.proxy_tags ? {...data, proxy_tags: data.proxy_tags.filter(tag => !(tag.prefix === \"\" && tag.suffix === \"\"))} : data\r\n\r\n      fetch(`${API_URL}m/`,{\r\n        method: 'POST',\r\n        body: JSON.stringify(newdata),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': localStorage.getItem(\"token\")\r\n        }}).then (res => res.json()\r\n        ).then (data => { \r\n            setErrorAlert(false);\r\n            closeModal();\r\n            fetchMembers();\r\n    }\r\n        ).catch (error => {\r\n            console.error(error);\r\n            setErrorAlert(true);\r\n        });\r\n    }\r\n\r\n    return (\r\n      <Switch>\r\n        <Route exact path={path}>\r\n        <>\r\n        <BS.Row className=\"mb-lg-3 justfiy-content-md-center\">\r\n        <BS.Col xs={12} lg={3}>\r\n        <BS.Form>\r\n          <BS.InputGroup className=\"mb-3\">\r\n          <BS.Form.Control disabled placeholder='Page length:'/>\r\n            <BS.Form.Control as=\"select\" defaultValue={localStorage.getItem(\"expandcards\") ? 10 : 25} onChange={e => {\r\n              setMembersPerPage(e.target.value);\r\n              setCurrentPage(1);\r\n              }}>\r\n              <option>10</option>\r\n              <option>25</option>\r\n              <option>50</option>\r\n              <option>100</option>\r\n            </BS.Form.Control>\r\n            </BS.InputGroup>\r\n        </BS.Form>\r\n        </BS.Col>\r\n        <BS.Col xs={12} lg={3}>\r\n        <BS.Form>\r\n          <BS.InputGroup className=\"mb-3\">\r\n          <BS.Form.Control disabled placeholder='Search by:'/>\r\n            <BS.Form.Control as=\"select\" defaultValue={searchBy} onChange={e => {\r\n              setSearchBy(e.target.value)\r\n              }}>\r\n              <option>name</option>\r\n              <option>display name</option>\r\n              <option>description</option>\r\n              <option>ID</option>\r\n            </BS.Form.Control>\r\n            </BS.InputGroup>\r\n        </BS.Form>\r\n        </BS.Col>\r\n        <BS.Col xs={12} lg={3}>\r\n        <BS.Form>\r\n          <BS.InputGroup className=\"mb-3\">\r\n          <BS.Form.Control disabled placeholder='Sort by:'/>\r\n            <BS.Form.Control as=\"select\" defaultValue={sortBy} onChange={e => {\r\n              setSortBy(e.target.value)\r\n              }}>\r\n              <option>name</option>\r\n              <option>display name</option>\r\n              <option>ID</option>\r\n              <option>date created</option>\r\n            </BS.Form.Control>\r\n            </BS.InputGroup>\r\n        </BS.Form>\r\n        </BS.Col>\r\n        <BS.Col xs={12} lg={3}>\r\n        <BS.Form>\r\n          <BS.InputGroup className=\"mb-3\">\r\n          <BS.Form.Control disabled placeholder='Sort order:'/>\r\n            <BS.Form.Control as=\"select\" defaultValue={sortOrder} onChange={e => {\r\n              setSortOrder(e.target.value)\r\n              }}>\r\n              <option>ascending</option>\r\n              <option>descending</option>\r\n            </BS.Form.Control>\r\n            </BS.InputGroup>\r\n        </BS.Form>\r\n        </BS.Col>\r\n        </BS.Row>\r\n        <BS.Row className=\"justify-content-md-center\">\r\n        <BS.Col xs={12} lg={3}>\r\n        <BS.Form>\r\n          <BS.InputGroup className=\"mb-3\">\r\n          <BS.Form.Control disabled placeholder='Only show:'/>\r\n            <BS.Form.Control as=\"select\" defaultValue={privacyFilter} onChange={e => {\r\n              setPrivacyFilter(e.target.value)\r\n              }}>\r\n              <option>all</option>\r\n              <option>private</option>\r\n              <option>public</option>\r\n            </BS.Form.Control>\r\n            </BS.InputGroup>\r\n        </BS.Form>\r\n        </BS.Col>\r\n        <BS.Col className=\"mb-3\" xs={12} lg={7}>\r\n        <BS.Form>\r\n            <BS.Form.Control value={value} onChange={e => {setValue(e.target.value); setCurrentPage(1);}} placeholder={`Search by ${searchBy}`}/>\r\n        </BS.Form>\r\n        </BS.Col>\r\n        <BS.Col className=\"mb-3\" xs={12} lg={2}>\r\n          <BS.Button type=\"primary\" className=\"m-0\" block onClick={() => fetchMembers()}>Refresh</BS.Button>\r\n        </BS.Col>\r\n        </BS.Row>\r\n        <BS.Row className=\"justify-content-md-center\">\r\n        <BS.Pagination className=\"ml-auto mr-auto\">\r\n          { currentPage === 1 ? <BS.Pagination.Prev disabled/> : <BS.Pagination.Prev onClick={() => setCurrentPage(currentPage - 1)} />}\r\n          { currentPage < 3 ? \"\" : <BS.Pagination.Item  onClick={() => setCurrentPage(1)} active={1 === active}>{1}</BS.Pagination.Item>}\r\n          { currentPage < 4 ? \"\" : currentPage < 5 ? <BS.Pagination.Item  onClick={() => setCurrentPage(2)} active={2 === active}>{2}</BS.Pagination.Item> : <BS.Pagination.Ellipsis disabled />}\r\n          { currentPage > 1 ? <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage - 1)}>{currentPage - 1}</BS.Pagination.Item> : \"\" }\r\n          <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage)} active={currentPage === active}>{currentPage}</BS.Pagination.Item>\r\n          { currentPage < pageAmount ? <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage + 1)}>{currentPage + 1}</BS.Pagination.Item> : \"\" }\r\n          { currentPage > pageAmount - 3 ? \"\" : currentPage === pageAmount - 3 ? <BS.Pagination.Item  onClick={() => setCurrentPage(pageAmount - 1)} active={pageAmount - 1 === active}>{pageAmount - 1}</BS.Pagination.Item> : <BS.Pagination.Ellipsis disabled />}\r\n          { currentPage > pageAmount - 2 ? \"\" : <BS.Pagination.Item  onClick={() => setCurrentPage(pageAmount)} active={pageAmount === active}>{pageAmount}</BS.Pagination.Item>}\r\n          { currentPage === pageAmount ? <BS.Pagination.Next disabled /> :<BS.Pagination.Next onClick={() => setCurrentPage(currentPage + 1)} />}\r\n          </BS.Pagination>\r\n        </BS.Row>\r\n        { isLoading ? <Loading /> : isError ? \r\n        <BS.Alert variant=\"danger\">Error fetching members.</BS.Alert> :\r\n        <>\r\n        <BS.Card className=\"w-100\">\r\n          <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n            <BS.Button variant=\"link\" className=\"float-left\" onClick={() => setOpen(o => !o)}><FaPlus className=\"mr-4\"/>Add Member</BS.Button> \r\n            <Popup open={open} position=\"top-center\" modal>\r\n              <BS.Container>\r\n                <BS.Card>\r\n                  <BS.Card.Header>\r\n                      <h5><FaPlus className=\"mr-3\"/> Add member </h5>\r\n                  </BS.Card.Header>\r\n                  <BS.Card.Body>\r\n                  { errorAlert ? <BS.Alert variant=\"danger\">Something went wrong, please try logging in and out again.</BS.Alert> : \"\" }\r\n                    <BS.Form onSubmit={handleSubmit(submitMember)}>\r\n                            <BS.Form.Text>\r\n                            </BS.Form.Text>\r\n                            <BS.Form.Row>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Name:</BS.Form.Label>\r\n                          <BS.Form.Control name=\"name\"{...register(\"name\")} defaultValue={''} required/>\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Display name: </BS.Form.Label>\r\n                            <BS.Form.Control name=\"display_name\" {...register(\"display_name\")}  defaultValue={''} />\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Birthday:</BS.Form.Label>\r\n                            <BS.Form.Control  pattern=\"^\\d{4}\\-(0[1-9]|1[012])\\-(0[1-9]|[12][0-9]|3[01])$\" name=\"birthday\" {...register(\"birthday\")}  defaultValue={''}/>\r\n                            <BS.Form.Text>(YYYY-MM-DD)</BS.Form.Text>\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Pronouns:</BS.Form.Label>\r\n                            <BS.Form.Control name=\"pronouns\" {...register(\"pronouns\")} defaultValue={''} />\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Avatar url:</BS.Form.Label> \r\n                          <BS.Form.Control type=\"url\" name=\"avatar_url\" {...register(\"avatar_url\")}  defaultValue={''} />\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Banner url:</BS.Form.Label> \r\n                          <BS.Form.Control type=\"url\" name=\"banner\" {...register(\"banner\")}  defaultValue={''} />\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Color:</BS.Form.Label> \r\n                          <BS.Form.Control  pattern=\"[A-Fa-f0-9]{6}\" name=\"color\" {...register(\"color\")}  defaultValue={''} />\r\n                            <BS.Form.Text>(hexcode)</BS.Form.Text>\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={2}>\r\n                            <BS.Form.Label>Proxy tags:</BS.Form.Label> \r\n                            <BS.Button variant=\"primary\" block onClick={() => setProxyView(view => !view)}> { proxyView ? \"Hide\" : \"Show\" }</BS.Button>\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={2}>\r\n                            <BS.Form.Label>Privacy settings:</BS.Form.Label> \r\n                            <BS.Button variant=\"primary\" block onClick={() => setPrivacyView(view => !view)}> { privacyView ? \"Hide\" : \"Show\" }</BS.Button>\r\n                        </BS.Col>\r\n                    </BS.Form.Row>\r\n                    <hr/>\r\n                    { proxyView ? <>\r\n                <h5>Proxy Tags</h5>\r\n                    <BS.Form.Row>\r\n                  { proxyTags.map((item, index) => (\r\n                    <BS.Col key={index} className=\"mb-lg-2\" xs={12} lg={2}>\r\n                        <BS.Form.Row>\r\n                        <BS.InputGroup className=\"ml-1 mr-1 mb-1\">\r\n                        <BS.Form.Control name={`proxy_tags[${index}].prefix`} defaultValue={item.prefix} {...register(`proxy_tags[${index}].prefix`)}/> \r\n                        <BS.Form.Control disabled placeholder='text'/>\r\n                        <BS.Form.Control name={`proxy_tags[${index}].suffix`} defaultValue={item.suffix} {...register(`proxy_tags[${index}].suffix`)}/>\r\n                        </BS.InputGroup>\r\n                        </BS.Form.Row>\r\n                    </BS.Col>\r\n                ))} <BS.Col className=\"mb-lg-2\" xs={12} lg={2}><BS.Button block variant=\"light\" onClick={() => addProxyField()}>Add new</BS.Button></BS.Col>\r\n             </BS.Form.Row>\r\n                    <hr/></> : \"\" }\r\n                { privacyView ? <><h5>privacy settings</h5>\r\n                    <BS.Form.Row>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                        <BS.Form.Label>Visibility:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"visibility\" as=\"select\" {...register(\"visibility\")} >\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Name:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"name_privacy\" as=\"select\" {...register(\"name_privacy\")} >\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Description:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"description_privacy\" as=\"select\" {...register(\"description_privacy\")} >\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Birthday:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"birthday_privacy\" as=\"select\" {...register(\"birthday_privacy\")} >\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Pronouns:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"pronoun_privacy\" as=\"select\" {...register(\"pronoun_privacy\")} >\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-3\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Meta:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"metadata_privacy\" as=\"select\" {...register(\"metadata_privacy\")} >\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                </BS.Form.Row>               \r\n                <hr/></> : \"\" }\r\n                <BS.Form.Group className=\"mt-3\">\r\n                        <BS.Form.Label>Description:</BS.Form.Label><br/>\r\n                        { localStorage.getItem('template1') ? <BS.Button className=\"mb-2\" size=\"sm\" variant=\"primary\" onClick={() => setTemplate('description', localStorage.getItem('template1'))}>Template 1</BS.Button> : \"\"} { localStorage.getItem('template2') ? <BS.Button className=\"mb-2\" size=\"sm\" variant=\"primary\" onClick={() => setTemplate('description', localStorage.getItem('template2'))}>Template 2</BS.Button> : \"\"} { localStorage.getItem('template3') ? <BS.Button className=\"mb-2\" size=\"sm\" variant=\"primary\" onClick={() => setTemplate('description', localStorage.getItem('template3'))}>Template 3</BS.Button> : \"\"}\r\n                        <BS.Form.Control maxLength=\"1000\" as=\"textarea\" rows=\"7\" name=\"description\" {...register(\"description\")}  defaultValue={''}/>\r\n                    </BS.Form.Group>\r\n                    <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button> <BS.Button variant=\"light\" className=\"float-right\" onClick={closeModal}>Cancel</BS.Button>\r\n                    </BS.Form>\r\n                  </BS.Card.Body>\r\n                </BS.Card>\r\n              </BS.Container>\r\n            </Popup>\r\n          </BS.Card.Header>\r\n        </BS.Card>\r\n        \r\n        <BS.Accordion className=\"mb-3 mt-3 w-100\" defaultActiveKey=\"0\">\r\n            {memberList}\r\n        </BS.Accordion>\r\n        <BS.Row className=\"justify-content-md-center\">\r\n        <BS.Pagination className=\"ml-auto mr-auto\">\r\n          { currentPage === 1 ? <BS.Pagination.Prev disabled/> : <BS.Pagination.Prev onClick={() => setCurrentPage(currentPage - 1)} />}\r\n          { currentPage < 3 ? \"\" : <BS.Pagination.Item  onClick={() => setCurrentPage(1)} active={1 === active}>{1}</BS.Pagination.Item>}\r\n          { currentPage < 4 ? \"\" : currentPage < 5 ? <BS.Pagination.Item  onClick={() => setCurrentPage(2)} active={2 === active}>{2}</BS.Pagination.Item> : <BS.Pagination.Ellipsis disabled />}\r\n          { currentPage > 1 ? <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage - 1)}>{currentPage - 1}</BS.Pagination.Item> : \"\" }\r\n          <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage)} active={currentPage === active}>{currentPage}</BS.Pagination.Item>\r\n          { currentPage < pageAmount ? <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage + 1)}>{currentPage + 1}</BS.Pagination.Item> : \"\" }\r\n          { currentPage > pageAmount - 3 ? \"\" : currentPage === pageAmount - 3 ? <BS.Pagination.Item  onClick={() => setCurrentPage(pageAmount - 1)} active={pageAmount - 1 === active}>{pageAmount - 1}</BS.Pagination.Item> : <BS.Pagination.Ellipsis disabled />}\r\n          { currentPage > pageAmount - 2 ? \"\" : <BS.Pagination.Item  onClick={() => setCurrentPage(pageAmount)} active={pageAmount === active}>{pageAmount}</BS.Pagination.Item>}\r\n          { currentPage === pageAmount ? <BS.Pagination.Next disabled /> :<BS.Pagination.Next onClick={() => setCurrentPage(currentPage + 1)} />}\r\n          </BS.Pagination>\r\n        </BS.Row>\r\n        </>\r\n        }\r\n        </>\r\n        </Route>\r\n        <Route path={`${path}/:memberID`}>\r\n          { isLoading ? <Loading/> :\r\n          <MemberPages members={members}\r\n          edit={memberEdit => setMembers(members.map(member => member.id === memberEdit.id ? Object.assign(member, memberEdit) : member))}/>}\r\n        </Route>\r\n        </Switch>\r\n    )\r\n}","import React from 'react';\r\n\r\nimport System from '../Components/Private/System.js'\r\nimport Memberlist from '../Components/Private/Memberlist.js'\r\n\r\nexport default function Dash(props) {\r\n\r\n    return (<>\r\n            <System />\r\n            <Memberlist />\r\n            </>\r\n    );\r\n}","import * as BS from 'react-bootstrap'\r\n\r\nexport default function Navigation() {\r\n    return (\r\n        <BS.Navbar className=\"mt-4 align-items-center justify-content-between footer\">\r\n            <BS.Nav>\r\n                <BS.Nav.Item>\r\n                    <BS.Nav.Link rel=\"noreferrer\" target=\"_blank\" href=\"https://pluralkit.me/\">\r\n                        Pluralkit.me\r\n                    </BS.Nav.Link>\r\n                </BS.Nav.Item>\r\n                <BS.Nav.Item>\r\n                    <BS.Nav.Link rel=\"noreferrer\" target=\"_blank\" href=\"https://github.com/Spectralitree/pk-webs\">\r\n                        Github \r\n                    </BS.Nav.Link>\r\n                </BS.Nav.Item>\r\n                <BS.Nav.Item>\r\n                    <BS.Nav.Link rel=\"noreferrer\" target=\"_blank\" href=\"https://ko-fi.com/spectralitree\">\r\n                        Ko-fi\r\n                    </BS.Nav.Link>\r\n                </BS.Nav.Item>\r\n            </BS.Nav>\r\n        </BS.Navbar>\r\n    )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport  * as BS from 'react-bootstrap'\r\nimport moment from 'moment';\r\nimport Popup from 'reactjs-popup';\r\nimport 'reactjs-popup/dist/index.css';\r\nimport autosize from 'autosize';\r\nimport LazyLoad from 'react-lazyload';\r\nimport Twemoji from 'react-twemoji';\r\n\r\nimport defaultAvatar from '../../default_discord_avatar.png'\r\nimport { FaLink } from \"react-icons/fa\";\r\n\r\nexport default function MemberCard(props) {\r\n    const { sysID } = useParams();\r\n    const member = props.member;\r\n\r\n    const [ avatar, setAvatar ] = useState('')\r\n    const [ displayName, setDisplayName ] = useState(\"\");\r\n    const [ birthday, setBirthday ] = useState(\"\");\r\n    const [ pronouns, setPronouns ] = useState(\"\");\r\n    const [ banner, setBanner ] = useState(\"\");\r\n    const [ color, setColor ] = useState(\"\");\r\n    const [ desc, setDesc ] = useState(\"\");\r\n    const proxyTags = member.proxy_tags;\r\n\r\n    const [ proxyView, setProxyView ] = useState(false);\r\n\r\n        useEffect(() => {\r\n            autosize(document.querySelector('textarea'));\r\n        })\r\n\r\n    useEffect(() => {\r\n        const { toHTML } = require('../../Functions/discord-parser.js');\r\n\r\n        if (member.display_name) {\r\n            setDisplayName(member.display_name)\r\n        } else setDisplayName('')\r\n\r\n        if (member.birthday) { \r\n            if (member.birthday.startsWith('0004-')) {\r\n                var bdaymoment = moment(member.birthday, 'YYYY-MM-DD').format('MMM D');\r\n                setBirthday(bdaymoment);\r\n            } else {\r\n                var birthdaymoment =  moment(member.birthday, 'YYYY-MM-DD').format('MMM D, YYYY');\r\n                setBirthday(birthdaymoment);\r\n            }\r\n        } else { setBirthday('');\r\n    }\r\n\r\n    if (member.avatar_url) {\r\n        var avatarsmall = member.avatar_url.replace('&format=jpeg', '');\r\n        setAvatar(avatarsmall.replace('?width=256&height=256', ''))\r\n    } else setAvatar('')\r\n\r\n        if (member.pronouns) {\r\n            setPronouns(toHTML(member.pronouns))\r\n        } else setPronouns('')\r\n\r\n        if (member.color) {\r\n            setColor(member.color);\r\n        } else setColor('');\r\n\r\n        if (member.banner) {\r\n            setBanner(member.banner);\r\n          } else setBanner(\"\");\r\n\r\n        if (member.description) {\r\n            setDesc(toHTML(member.description));\r\n        } else setDesc(\"(no description)\");\r\n    }, [member.description, member.color, member.birthday, member.display_name, member.pronouns, member.avatar_url, member.proxy_tags, member.banner]);\r\n\r\n    function copyLink() {\r\n        var link = `https://pk-webs.spectralitree.com/profile/${sysID}/${member.id}`\r\n        var textField = document.createElement('textarea')\r\n        textField.innerText = link\r\n        document.body.appendChild(textField);\r\n\r\n        textField.select();\r\n        textField.setSelectionRange(0, 99999);\r\n        document.execCommand('copy');\r\n\r\n        document.body.removeChild(textField);\r\n    }\r\n\r\n    function renderCard() {\r\n        return (\r\n            <BS.Card.Body style={{borderLeft: `5px solid #${color}` }}>\r\n            <BS.Row>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>ID:</b> {member.id}</BS.Col>\r\n                { member.display_name ? localStorage.getItem('twemoji') ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><Twemoji options={{ className: 'twemoji' }}><b>Display name: </b>{displayName}</Twemoji></BS.Col> :\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Display name:</b> {displayName}</BS.Col> : \"\" }\r\n                { member.birthday ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Birthday:</b> {birthday}</BS.Col> : \"\" }\r\n                { member.pronouns ?  localStorage.getItem('twemoji') ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><Twemoji options={{ className: 'twemoji' }}><b>Pronouns:</b> <span dangerouslySetInnerHTML={{__html: pronouns}}></span></Twemoji></BS.Col> : \r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Pronouns:</b> <span dangerouslySetInnerHTML={{__html: pronouns}}></span></BS.Col> : \"\" }\r\n                { member.color ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Color:</b> {color}</BS.Col> : \"\" }\r\n                { proxyView ? \"\" : <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Proxy tags:</b> <BS.Button variant=\"light\" size=\"sm\" onClick={() => setProxyView(true)}>View</BS.Button></BS.Col> }\r\n                { proxyView || !member.banner ? \"\" : \r\n                    <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                    <b>Banner:</b>{\" \"}\r\n                    <Popup\r\n                      trigger={\r\n                        <BS.Button\r\n                      variant=\"light\"\r\n                      size=\"sm\"\r\n                    >\r\n                      View\r\n                    </BS.Button>\r\n                      }\r\n                      className=\"banner\"\r\n                      modal\r\n                    >\r\n                      {(close) => (\r\n                        <div className=\"text-center w-100\" onClick={() => close()}>\r\n                            <div className=\"m-auto\" style={{maxWidth: '100%'}}>\r\n                                <BS.Image src={`${banner}`} style={{maxWidth: 'auto', maxHeight: '640px'}} thumbnail />\r\n                            </div>\r\n                        </div>\r\n                      )}\r\n                    </Popup>\r\n                    </BS.Col>\r\n                   }\r\n                \r\n            </BS.Row>\r\n            { proxyView ? <><hr/>\r\n             <h5>Viewing proxy tags</h5>\r\n         <BS.Row className=\"mb-2\">\r\n          { proxyTags.length === 0 ? <BS.Col className=\"mb-lg-2\"><b>No proxy tags set.</b></BS.Col> : proxyTags.map((proxytag) => <BS.Col key={proxytag.index} className=\"mb-lg-2\" xs={12} lg={2}> <code>{proxytag.prefix}text{proxytag.suffix}</code></BS.Col> )}\r\n         </BS.Row>\r\n         <BS.Button variant=\"light\" onClick={() => setProxyView(false)}>Exit</BS.Button>\r\n            <hr/></> : \"\" }\r\n            <p><b>Description:</b></p>\r\n            { localStorage.getItem('twemoji') ? <Twemoji options={{ className: 'twemoji' }}><p dangerouslySetInnerHTML={{__html: desc}}></p></Twemoji> : <p dangerouslySetInnerHTML={{__html: desc}}></p>}\r\n            { !member.banner || !localStorage.getItem(\"bottombanners\") ? \"\" : \r\n              <BS.Image rounded className=\"mb-2\" style={{width: '100%', maxHeight: '15rem', objectFit: 'cover'}} src={banner}/>\r\n            }\r\n            <BS.Row><BS.Col><Link to={`${sysID}/${member.id}`}><BS.Button variant=\"primary\" className=\"float-right\">View page</BS.Button></Link></BS.Col></BS.Row> </BS.Card.Body>\r\n        )\r\n    }\r\n\r\n    return (\r\n       <LazyLoad offset={100}>\r\n           <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n           <div> <BS.OverlayTrigger placement=\"left\" overlay={ \r\n            <BS.Tooltip>\r\n                Copy link\r\n            </BS.Tooltip>\r\n        }><BS.Button variant=\"link\" onClick={() => copyLink()}><FaLink style={{fontSize: '1.25rem'}}/></BS.Button></BS.OverlayTrigger>\r\n           { localStorage.getItem('pagesonly') ? \r\n        <Link to={`${sysID}/${member.id}`}><BS.Button variant=\"link\"> <b>{member.name}</b> ({member.id})</BS.Button></Link>\r\n        : <BS.Accordion.Toggle  as={BS.Button} variant=\"link\" eventKey={member.id} > <b>{member.name}</b> ({member.id})</BS.Accordion.Toggle>}</div>\r\n            { member.avatar_url ?   <Popup trigger={<BS.Image src={`${member.avatar_url}`} style={{width: 50, height: 50}} tabIndex=\"0\" className=\"float-right\" roundedCircle />} className=\"avatar\" modal>\r\n                {close => (\r\n                  <div className=\"text-center w-100 m-0\" onClick={() => close()}>\r\n                  <div className=\"m-auto\" style={{maxWidth: '640px'}}>\r\n                      <BS.Image src={`${avatar}`} style={{'maxWidth': '100%', height: 'auto'}} thumbnail />\r\n                  </div>\r\n                </div>\r\n                )}\r\n            </Popup> : \r\n        <BS.Image src={defaultAvatar} style={{width: 50, height: 50}} tabIndex=\"0\" className=\"float-right\" roundedCircle />}\r\n        </BS.Card.Header>\r\n        {localStorage.getItem(\"expandcards\") ? renderCard() : <BS.Accordion.Collapse eventKey={member.id}>\r\n        {renderCard()}\r\n        </BS.Accordion.Collapse>}\r\n        </LazyLoad>\r\n        \r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport  * as BS from 'react-bootstrap'\r\nimport moment from 'moment';\r\nimport Popup from 'reactjs-popup';\r\nimport 'reactjs-popup/dist/index.css';\r\nimport autosize from 'autosize';\r\nimport Twemoji from 'react-twemoji';\r\n\r\nimport defaultAvatar from '../../default_discord_avatar.png'\r\nimport { FaLink } from \"react-icons/fa\";\r\n\r\nexport default function ProfilePage(props) {\r\n\r\n    const location = useLocation();\r\n    const member = props.member;\r\n\r\n    const [ avatar, setAvatar ] = useState('')\r\n    const [ banner, setBanner ] = useState(\"\");\r\n    const [ displayName, setDisplayName ] = useState(\"\");\r\n    const [ birthday, setBirthday ] = useState(\"\");\r\n    const [ pronouns, setPronouns ] = useState(\"\");\r\n    const [ color, setColor ] = useState(\"\");\r\n    const [ desc, setDesc ] = useState(\"\");\r\n    const proxyTags = member.proxy_tags;\r\n\r\n    const [ proxyView, setProxyView ] = useState(false);\r\n\r\n        useEffect(() => {\r\n            autosize(document.querySelector('textarea'));\r\n        })\r\n\r\n    useEffect(() => {\r\n        const { toHTML } = require('../../Functions/discord-parser.js');\r\n\r\n        if (member.display_name) {\r\n            setDisplayName(member.display_name)\r\n        } else setDisplayName('')\r\n\r\n        if (member.birthday) { \r\n            if (member.birthday.startsWith('0004-')) {\r\n                var bdaymoment = moment(member.birthday, 'YYYY-MM-DD').format('MMM D');\r\n                setBirthday(bdaymoment);\r\n            } else {\r\n                var birthdaymoment =  moment(member.birthday, 'YYYY-MM-DD').format('MMM D, YYYY');\r\n                setBirthday(birthdaymoment);\r\n            }\r\n        } else { setBirthday('');\r\n    }\r\n\r\n    if (member.avatar_url) {\r\n        var avatarsmall = member.avatar_url.replace('&format=jpeg', '');\r\n        setAvatar(avatarsmall.replace('?width=256&height=256', ''))\r\n    } else setAvatar('')\r\n\r\n        if (member.pronouns) {\r\n            setPronouns(toHTML(member.pronouns))\r\n        } else setPronouns('')\r\n\r\n        if (member.color) {\r\n            setColor(member.color);\r\n        } else setColor('');\r\n\r\n        if (member.banner) {\r\n            setBanner(member.banner);\r\n          } else setBanner(\"\");\r\n\r\n        if (member.description) {\r\n            setDesc(toHTML(member.description));\r\n        } else setDesc(\"(no description)\");\r\n    }, [member.description, member.color, member.birthday, member.display_name, member.pronouns, member.avatar_url, member.proxy_tags, member.banner]);\r\n\r\n    function copyLink() {\r\n        var link = `https://spectralitree.github.io${location.pathname}`\r\n        var textField = document.createElement('textarea')\r\n        textField.innerText = link\r\n        document.body.appendChild(textField);\r\n\r\n        textField.select();\r\n        textField.setSelectionRange(0, 99999);\r\n        document.execCommand('copy');\r\n\r\n        document.body.removeChild(textField);\r\n    }\r\n\r\n    return (\r\n       <> \r\n       { localStorage.getItem('colorbg') && member.color ? \"\" : <><div className=\"backdrop\" style={{backgroundColor: `#${color}`}}/>\r\n        { !localStorage.getItem('fullbg') ? <div className=\"backdrop-overlay\"/> : \"\" }</> }\r\n        { member.banner && !localStorage.getItem(\"hidebanners\") ? <div className=\"banner\" style={{backgroundImage: `url(${banner})`}} alt=\"\"/> : \"\"}\r\n        <BS.Alert variant=\"primary\" >You are currently <b>viewing</b> a member.</BS.Alert>\r\n        <BS.Card className=\"mb-5\">\r\n        <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n         <div> <BS.OverlayTrigger placement=\"left\" overlay={ \r\n            <BS.Tooltip>\r\n                Copy link\r\n            </BS.Tooltip>\r\n        }><BS.Button variant=\"link\" onClick={() => copyLink()}><FaLink style={{fontSize: '1.25rem'}}/></BS.Button></BS.OverlayTrigger>\r\n         <BS.Button variant=\"link\" ><b>{member.name}</b> ({member.id})</BS.Button></div>\r\n            { member.avatar_url ?   <Popup trigger={<BS.Image src={`${member.avatar_url}`} style={{width: 50, height: 50}} tabIndex=\"0\" className=\"float-right\" roundedCircle />} className=\"avatar\" modal>\r\n                {close => (\r\n                  <div className=\"text-center w-100 m-0\" onClick={() => close()}>\r\n                  <div className=\"m-auto\" style={{maxWidth: '640px'}}>\r\n                      <BS.Image src={`${avatar}`} style={{'maxWidth': '100%', height: 'auto'}} thumbnail />\r\n                  </div>\r\n                </div>\r\n                )}\r\n            </Popup> : \r\n        <BS.Image src={defaultAvatar} style={{width: 50, height: 50}} tabIndex=\"0\" className=\"float-right\" roundedCircle />}\r\n        </BS.Card.Header>\r\n                <BS.Card.Body style={{ borderLeft: localStorage.getItem('colorbg') ? `5px solid #${color}` : ''}}>\r\n            <BS.Row>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>ID:</b> {member.id}</BS.Col>\r\n                { member.display_name ? localStorage.getItem('twemoji') ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><Twemoji options={{ className: 'twemoji' }}><b>Display name: </b>{displayName}</Twemoji></BS.Col> :\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Display name:</b> {displayName}</BS.Col> : \"\" }\r\n                { member.birthday ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Birthday:</b> {birthday}</BS.Col> : \"\" }\r\n                { member.pronouns ?  localStorage.getItem('twemoji') ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><Twemoji options={{ className: 'twemoji' }}><b>Pronouns:</b> <span dangerouslySetInnerHTML={{__html: pronouns}}></span></Twemoji></BS.Col> : \r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Pronouns:</b> <span dangerouslySetInnerHTML={{__html: pronouns}}></span></BS.Col> : \"\" }\r\n                { member.color ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Color:</b> {color}</BS.Col> : \"\" }\r\n                { proxyView ? \"\" : <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Proxy tags:</b> <BS.Button variant=\"light\" size=\"sm\" onClick={() => setProxyView(true)}>View</BS.Button></BS.Col> }\r\n                { proxyView || !member.banner ? \"\" : \r\n                    <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                    <b>Banner:</b>{\" \"}\r\n                    <Popup\r\n                      trigger={\r\n                        <BS.Button\r\n                      variant=\"light\"\r\n                      size=\"sm\"\r\n                    >\r\n                      View\r\n                    </BS.Button>\r\n                      }\r\n                      className=\"banner\"\r\n                      modal\r\n                    >\r\n                      {(close) => (\r\n                        <div className=\"text-center w-100\" onClick={() => close()}>\r\n                            <div className=\"m-auto\" style={{maxWidth: '100%'}}>\r\n                                <BS.Image src={`${banner}`} style={{maxWidth: 'auto', maxHeight: '640px'}} thumbnail />\r\n                            </div>\r\n                        </div>\r\n                      )}\r\n                    </Popup>\r\n                    </BS.Col>\r\n                   }\r\n                \r\n            </BS.Row>\r\n            { proxyView ? <><hr/>\r\n             <h5>Viewing proxy tags</h5>\r\n         <BS.Row className=\"mb-2\">\r\n          { proxyTags.length === 0 ? <BS.Col className=\"mb-lg-2\"><b>No proxy tags set.</b></BS.Col> : proxyTags.map((proxytag) => <BS.Col key={proxytag.index} className=\"mb-lg-2\" xs={12} lg={2}> <code>{proxytag.prefix}text{proxytag.suffix}</code></BS.Col> )}\r\n         </BS.Row>\r\n         <BS.Button variant=\"light\" onClick={() => setProxyView(false)}>Exit</BS.Button>\r\n            <hr/></> : \"\" }\r\n            <p><b>Description:</b></p>\r\n            { localStorage.getItem('twemoji') ? <Twemoji options={{ className: 'twemoji' }}><p dangerouslySetInnerHTML={{__html: desc}}></p></Twemoji> : <p dangerouslySetInnerHTML={{__html: desc}}></p>}\r\n            { !member.banner || !localStorage.getItem(\"bottombanners\") ? \"\" : \r\n              <BS.Image rounded className=\"mb-2\" style={{width: '100%', maxHeight: '15rem', objectFit: 'cover'}} src={banner}/>\r\n            }\r\n            { props.list ? <BS.Row><BS.Col><Link to={location.pathname.substring(0, location.pathname.lastIndexOf('/'))}><BS.Button variant=\"primary\" className=\"float-right\">Back</BS.Button></Link></BS.Col></BS.Row> : \"\"}\r\n            </BS.Card.Body>\r\n        </BS.Card>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport * as BS from 'react-bootstrap';\r\nimport { useParams } from \"react-router-dom\";\r\nimport ProfilePage from '../Components/Public/ProfilePage.js'\r\n\r\nexport default function MemberPages(props) {\r\n    const { memberID } = useParams();\r\n    \r\n    const memberpages = props.members.filter((member) => member.id === memberID)\r\n    const memberpage = memberpages.map((member) => <ProfilePage key={member.id} member={member} list={true}/>)\r\n    const noMatch = memberpages.length === 0;\r\n\r\n    if (noMatch) return (\r\n        <BS.Alert variant=\"danger\">This system does not have a member with the ID '{memberID}', or the member's visibility is set to private.</BS.Alert>\r\n    )\r\n\r\n    return (\r\n        <>\r\n            {memberpage}\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState, useCallback } from 'react';\r\nimport { Switch, Route, useParams, useRouteMatch } from 'react-router-dom';\r\nimport  * as BS from 'react-bootstrap'\r\nimport 'reactjs-popup/dist/index.css';\r\n\r\nimport ProfileCard from './ProfileCard.js'\r\nimport ProfilePages from '../../Pages/ProfilePages.js'\r\nimport Loading from \"../Loading.js\";\r\nimport API_URL from \"../../Constants/constants.js\";\r\n\r\nexport default function Memberlist() {\r\n\r\n    const { path } = useRouteMatch();\r\n    const { sysID } = useParams();\r\n\r\n    const [isLoading, setIsLoading ] = useState(false);\r\n    const [isError, setIsError ] = useState(false);\r\n    const [isForbidden, setIsForbidden ] = useState(false);\r\n\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [membersPerPage, setMembersPerPage] = useState(25);\r\n\r\n    const [members, setMembers ] = useState([]);\r\n\r\n    const [searchBy, setSearchBy] = useState('name')\r\n    const [sortBy, setSortBy] = useState('name')\r\n    const [sortOrder, setSortOrder] = useState('ascending')\r\n\r\n    const [value, setValue] = useState('');\r\n\r\n  const fetchMembers = useCallback( () => {\r\n    setIsLoading(true);\r\n    setIsError(false);\r\n    setMembersPerPage(localStorage.getItem(\"expandcards\") ? 10 : 25);\r\n\r\n     fetch(`${API_URL}s/${sysID}/members`,{\r\n    method: 'GET',\r\n    }).then ( res => {\r\n      if (res.status === 403) {\r\n        throw new Error('Access denied!');\r\n      }\r\n      return res.json()\r\n    }\r\n    ).then (data => { \r\n    setMembers(data)\r\n      setIsLoading(false);\r\n  })\r\n    .catch (error => {\r\n      if (error.message === 'Access denied!') {\r\n        setIsForbidden(true);\r\n      } else {\r\n        console.log(error);\r\n        setIsError(true);\r\n      }\r\n      setIsLoading(false);\r\n    })\r\n  }, [sysID])\r\n\r\n  useEffect(() => {\r\n    fetchMembers();\r\n  }, [fetchMembers])\r\n\r\n  const indexOfLastMember = currentPage * membersPerPage;\r\n  const indexOfFirstMember = indexOfLastMember - membersPerPage;\r\n\r\n    let Members = members.map(member => {\r\n      if (member.display_name) {\r\n        return {...member, displayName: member.display_name}\r\n      } return {...member, displayName: member.name}\r\n    }) \r\n    let Members1 = Members.map(member => {\r\n      if (member.description) {\r\n        return {...member, desc: member.description}\r\n      } return {...member, desc: \"(no description)\"}\r\n    })\r\n    \r\n    const currentMembers =  Members1.filter(member => {\r\n      if (!value) return true;\r\n      \r\n      if (searchBy === 'name') {\r\n      if (member.name.toLowerCase().includes(value.toLowerCase())) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } else if (searchBy === 'display name') {\r\n      if (member.displayName.toLowerCase().includes(value.toLowerCase())) {\r\n        return true;\r\n      }\r\n      return false\r\n    } else if (searchBy === 'description') {\r\n      if (member.desc.toLowerCase().includes(value.toLowerCase())) {\r\n        return true;\r\n      }\r\n      return false;\r\n    } else if (searchBy === 'ID') {\r\n      if (member.id.toLowerCase().includes(value.toLowerCase())) {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n      return false;\r\n    })\r\n\r\n    const active = currentPage;\r\n    const pageAmount = Math.ceil(currentMembers.length / membersPerPage);\r\n\r\n    var sortMembers = currentMembers;\r\n    if (sortBy === 'name') {\r\n      if (sortOrder === 'descending') {\r\n        sortMembers =  currentMembers.sort((a, b) => a.name.localeCompare(b.name)).reverse().slice(indexOfFirstMember, indexOfLastMember);\r\n      } else sortMembers =  currentMembers.sort((a, b) => a.name.localeCompare(b.name)).slice(indexOfFirstMember, indexOfLastMember);\r\n    } \r\n    else if (sortBy === 'display name') {\r\n        if (sortOrder === 'descending') {\r\n          sortMembers =  currentMembers.sort((a, b) => a.displayName.localeCompare(b.displayName)).reverse().slice(indexOfFirstMember, indexOfLastMember);\r\n        } else sortMembers =  currentMembers.sort((a, b) => a.displayName.localeCompare(b.displayName)).slice(indexOfFirstMember, indexOfLastMember);\r\n    } \r\n    else if (sortBy === 'ID') {\r\n      if (sortOrder === 'descending') {\r\n        sortMembers =  currentMembers.sort((a, b) => a.id.localeCompare(b.id)).reverse().slice(indexOfFirstMember, indexOfLastMember);\r\n      } else sortMembers =  currentMembers.sort((a, b) => a.id.localeCompare(b.id)).slice(indexOfFirstMember, indexOfLastMember);\r\n    }\r\n\r\n      const memberList = sortMembers.map((member) => <BS.Card key={member.id} className={localStorage.getItem(\"expandcards\") ? \"mb-3\" : \"\"}>\r\n      <ProfileCard\r\n      member={member} \r\n      />\r\n    </BS.Card>\r\n    );\r\n\r\n    return (\r\n      <Switch>\r\n        <Route exact path={path}>\r\n      <>\r\n      <BS.Row className=\"mb-lg-3 justfiy-content-md-center\">\r\n      <BS.Col xs={12} lg={3}>\r\n      <BS.Form>\r\n        <BS.InputGroup className=\"mb-3\">\r\n        <BS.Form.Control disabled placeholder='Page length:'/>\r\n          <BS.Form.Control as=\"select\" defaultValue={localStorage.getItem(\"expandcards\") ? 10 : 25} onChange={e => {\r\n            setMembersPerPage(e.target.value);\r\n            setCurrentPage(1);\r\n            }}>\r\n            <option>10</option>\r\n            <option>25</option>\r\n            <option>50</option>\r\n            <option>100</option>\r\n          </BS.Form.Control>\r\n          </BS.InputGroup>\r\n      </BS.Form>\r\n      </BS.Col>\r\n      <BS.Col xs={12} lg={3}>\r\n      <BS.Form>\r\n        <BS.InputGroup className=\"mb-3\">\r\n        <BS.Form.Control disabled placeholder='Search by:'/>\r\n          <BS.Form.Control as=\"select\" defaultValue={searchBy} onChange={e => {\r\n            setSearchBy(e.target.value)\r\n            }}>\r\n            <option>name</option>\r\n            <option>display name</option>\r\n            <option>description</option>\r\n            <option>ID</option>\r\n          </BS.Form.Control>\r\n          </BS.InputGroup>\r\n      </BS.Form>\r\n      </BS.Col>\r\n      <BS.Col xs={12} lg={3}>\r\n      <BS.Form>\r\n        <BS.InputGroup className=\"mb-3\">\r\n        <BS.Form.Control disabled placeholder='Sort by:'/>\r\n          <BS.Form.Control as=\"select\" defaultValue={sortBy} onChange={e => {\r\n            setSortBy(e.target.value)\r\n            }}>\r\n            <option>name</option>\r\n            <option>display name</option>\r\n            <option>ID</option>\r\n          </BS.Form.Control>\r\n          </BS.InputGroup>\r\n      </BS.Form>\r\n      </BS.Col>\r\n      <BS.Col xs={12} lg={3}>\r\n        <BS.Form>\r\n          <BS.InputGroup className=\"mb-3\">\r\n          <BS.Form.Control disabled placeholder='Sort order:'/>\r\n            <BS.Form.Control as=\"select\" defaultValue={sortOrder} onChange={e => {\r\n              setSortOrder(e.target.value)\r\n              }}>\r\n              <option>ascending</option>\r\n              <option>descending</option>\r\n            </BS.Form.Control>\r\n            </BS.InputGroup>\r\n        </BS.Form>\r\n        </BS.Col>\r\n      </BS.Row>\r\n      <BS.Row className=\"justify-content-md-center\">\r\n      <BS.Col className=\"mb-3\" xs={12} lg={7}>\r\n      <BS.Form>\r\n          <BS.Form.Control value={value} onChange={e => {setValue(e.target.value); setCurrentPage(1);}} placeholder={`Search by ${searchBy}`}/>\r\n      </BS.Form>\r\n      </BS.Col>\r\n      <BS.Col className=\"mb-3\" xs={12} lg={2}>\r\n        <BS.Button type=\"primary\" className=\"m-0\" block onClick={() => fetchMembers()}>Refresh</BS.Button>\r\n      </BS.Col>\r\n      </BS.Row>\r\n      <BS.Row className=\"justify-content-md-center\">\r\n      <BS.Pagination className=\"ml-auto mr-auto\">\r\n          { currentPage === 1 ? <BS.Pagination.Prev disabled/> : <BS.Pagination.Prev onClick={() => setCurrentPage(currentPage - 1)} />}\r\n          { currentPage < 3 ? \"\" : <BS.Pagination.Item  onClick={() => setCurrentPage(1)} active={1 === active}>{1}</BS.Pagination.Item>}\r\n          { currentPage < 4 ? \"\" : currentPage < 5 ? <BS.Pagination.Item  onClick={() => setCurrentPage(2)} active={2 === active}>{2}</BS.Pagination.Item> : <BS.Pagination.Ellipsis disabled />}\r\n          { currentPage > 1 ? <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage - 1)}>{currentPage - 1}</BS.Pagination.Item> : \"\" }\r\n          <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage)} active={currentPage === active}>{currentPage}</BS.Pagination.Item>\r\n          { currentPage < pageAmount ? <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage + 1)}>{currentPage + 1}</BS.Pagination.Item> : \"\" }\r\n          { currentPage > pageAmount - 3 ? \"\" : currentPage === pageAmount - 3 ? <BS.Pagination.Item  onClick={() => setCurrentPage(pageAmount - 1)} active={pageAmount - 1 === active}>{pageAmount - 1}</BS.Pagination.Item> : <BS.Pagination.Ellipsis disabled />}\r\n          { currentPage > pageAmount - 2 ? \"\" : <BS.Pagination.Item  onClick={() => setCurrentPage(pageAmount)} active={pageAmount === active}>{pageAmount}</BS.Pagination.Item>}\r\n          { currentPage === pageAmount ? <BS.Pagination.Next disabled /> :<BS.Pagination.Next onClick={() => setCurrentPage(currentPage + 1)} />}\r\n        </BS.Pagination>\r\n      </BS.Row>\r\n      { isLoading ? <Loading /> : isError ? \r\n      <BS.Alert variant=\"danger\">Error fetching members.</BS.Alert> : isForbidden ? <BS.Alert variant=\"danger\">Member list is private.</BS.Alert> :\r\n      <>\r\n        <BS.Accordion className=\"mb-3 mt-3 w-100\" defaultActiveKey=\"0\">\r\n            {memberList}\r\n        </BS.Accordion>\r\n        <BS.Row className=\"justify-content-md-center\">\r\n      <BS.Pagination className=\"ml-auto mr-auto\">\r\n          { currentPage === 1 ? <BS.Pagination.Prev disabled/> : <BS.Pagination.Prev onClick={() => setCurrentPage(currentPage - 1)} />}\r\n          { currentPage < 3 ? \"\" : <BS.Pagination.Item  onClick={() => setCurrentPage(1)} active={1 === active}>{1}</BS.Pagination.Item>}\r\n          { currentPage < 4 ? \"\" : currentPage < 5 ? <BS.Pagination.Item  onClick={() => setCurrentPage(2)} active={2 === active}>{2}</BS.Pagination.Item> : <BS.Pagination.Ellipsis disabled />}\r\n          { currentPage > 1 ? <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage - 1)}>{currentPage - 1}</BS.Pagination.Item> : \"\" }\r\n          <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage)} active={currentPage === active}>{currentPage}</BS.Pagination.Item>\r\n          { currentPage < pageAmount ? <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage + 1)}>{currentPage + 1}</BS.Pagination.Item> : \"\" }\r\n          { currentPage > pageAmount - 3 ? \"\" : currentPage === pageAmount - 3 ? <BS.Pagination.Item  onClick={() => setCurrentPage(pageAmount - 1)} active={pageAmount - 1 === active}>{pageAmount - 1}</BS.Pagination.Item> : <BS.Pagination.Ellipsis disabled />}\r\n          { currentPage > pageAmount - 2 ? \"\" : <BS.Pagination.Item  onClick={() => setCurrentPage(pageAmount)} active={pageAmount === active}>{pageAmount}</BS.Pagination.Item>}\r\n          { currentPage === pageAmount ? <BS.Pagination.Next disabled /> :<BS.Pagination.Next onClick={() => setCurrentPage(currentPage + 1)} />}\r\n        </BS.Pagination>\r\n      </BS.Row>\r\n        </>\r\n        }\r\n        </>\r\n          </Route>\r\n            <Route path={`/profile/${sysID}/:memberID`}>\r\n              { isLoading ? <Loading/> :\r\n            <ProfilePages members={members}/>}\r\n          </Route>\r\n        </Switch>\r\n    )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport { useParams } from 'react-router-dom';\r\nimport * as BS from 'react-bootstrap';\r\nimport Popup from 'reactjs-popup';\r\nimport Twemoji from 'react-twemoji';\r\n\r\nimport { FaAddressCard } from \"react-icons/fa\";\r\nimport defaultAvatar from '../../default_discord_avatar.png'\r\nimport Loading from \"../Loading.js\";\r\nimport API_URL from \"../../Constants/constants.js\";\r\nimport ProfileList from \"./ProfileList.js\";\r\n\r\nexport default function Profile () {\r\n\r\n    const match = useRouteMatch(\"/profile/:sysID/:memberID\");\r\n\r\n    const { sysID } = useParams();\r\n    const [ system, setSystem ] = useState('');\r\n    const [ name, setName ] = useState('');\r\n    const [ tag, setTag ] = useState(\"\");\r\n    const [ timezone, setTimezone ] = useState(\"\");\r\n    const [ desc, setDesc ] = useState(\"\");\r\n    const [ avatar, setAvatar ] = useState('');\r\n    const [ banner, setBanner ] = useState(\"\");\r\n\r\n    const [ isLoading, setIsLoading ] = useState(true);\r\n    const [ isError, setIsError ] = useState(false);\r\n\r\n    useEffect (() => {\r\n        fetch(`${API_URL}s/${sysID}`,{\r\n        method: 'GET'\r\n    }).then ( res => res.json()\r\n        ).then (data => { \r\n          setSystem(data);\r\n          setIsLoading(false);\r\n      })\r\n        .catch (error => { \r\n            console.log(error);\r\n            setIsError(true);\r\n            setIsLoading(false);\r\n        }) \r\n    }, [sysID])\r\n\r\n    useEffect(() => {\r\n        const { toHTML } = require('../../Functions/discord-parser.js');\r\n        \r\n        if (system.name) {\r\n            setName(system.name);\r\n        } else setName('');\r\n\r\n        if (system.avatar_url) {\r\n            var avatarsmall = system.avatar_url.replace('&format=jpeg', '');\r\n            setAvatar(avatarsmall.replace('?width=256&height=256', ''))\r\n        } else setAvatar('')\r\n\r\n        if (system.banner) {\r\n            setBanner(system.banner);\r\n          } else setBanner(\"\");\r\n\r\n        if (system.tag) {\r\n            setTag(system.tag);\r\n        } else setTag('');\r\n    \r\n        if (system.tz) {\r\n            setTimezone(system.tz);\r\n        } else setTimezone('');\r\n\r\n        if (system.description) {\r\n            setDesc(toHTML(system.description));\r\n        } else setDesc(\"(no description)\");\r\n    }, [system.description, system.tag, system.avatar_url, system.tz, system.name, system.banner]);\r\n\r\n   return (match ? <ProfileList sysID={sysID} /> :\r\n   <>{ isLoading ? <Loading /> : isError ?  <BS.Alert variant=\"danger\">Something went wrong, either the system doesn't exist, or there was an error fetching data.</BS.Alert> :\r\n    <>{ system.banner && !localStorage.getItem(\"hidebanners\") ? <div className=\"banner\" style={{backgroundImage: `url(${banner})`}} alt=\"\"/> : \"\"}\r\n    <BS.Alert variant=\"primary\" >You are currently <b>viewing</b> a system.</BS.Alert>\r\n        <BS.Card className=\"mb-3 mt-3 w-100\" >\r\n        <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n           <BS.Card.Title className=\"float-left\"><FaAddressCard className=\"mr-4 float-left\" /> {name} ({system.id})</BS.Card.Title> \r\n           { system.avatar_url ? <Popup trigger={<BS.Image src={`${system.avatar_url}`} style={{width: 50, height: 50}} tabIndex=\"0\" className=\"float-right\" roundedCircle />} className=\"avatar\" modal>\r\n         {close => (\r\n             <div className=\"text-center w-100 m-0\" onClick={() => close()}>\r\n                <div className=\"m-auto\" style={{maxWidth: '640px'}}>\r\n                    <BS.Image src={`${avatar}`} style={{'maxWidth': '100%', height: 'auto'}} thumbnail />\r\n                </div>\r\n             </div>\r\n         )}\r\n     </Popup> : \r\n        <BS.Image src={defaultAvatar} style={{width: 50, height: 50}} className=\"float-right\" roundedCircle />}\r\n        </BS.Card.Header>\r\n        <BS.Card.Body>\r\n        <BS.Row>\r\n             <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>ID:</b> {system.id}</BS.Col>\r\n             <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Tag:</b> {tag}</BS.Col>\r\n             <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Timezone:</b> {timezone}</BS.Col>\r\n             {system.banner ? \r\n                  <BS.Col className=\"mb-lg-3\" xs={12} lg={3}>\r\n                  <b>Banner:</b>{\" \"}\r\n                  <Popup\r\n                    trigger={\r\n                      <BS.Button\r\n                    variant=\"light\"\r\n                    size=\"sm\"\r\n                  >\r\n                    View\r\n                  </BS.Button>\r\n                    }\r\n                    className=\"banner\"\r\n                    modal\r\n                  >\r\n                    {(close) => (\r\n                      <div className=\"text-center w-100\" onClick={() => close()}>\r\n                        <div className=\"m-auto\" style={{maxWidth: '100%'}}>\r\n                            <BS.Image src={`${banner}`} style={{maxWidth: 'auto', maxHeight: '640px'}} thumbnail />\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </Popup>\r\n                  </BS.Col>\r\n                 : \"\" }\r\n         </BS.Row>\r\n         <p><b>Description:</b></p>\r\n         { localStorage.getItem('twemoji') ? <Twemoji options={{ className: 'twemoji' }}><p dangerouslySetInnerHTML={{__html: desc}}></p></Twemoji> : <p dangerouslySetInnerHTML={{__html: desc}}></p>}\r\n         { !system.banner || !localStorage.getItem(\"bottombanners\") ? \"\" : \r\n              <BS.Image rounded className=\"mb-2\" style={{width: '100%', maxHeight: '15rem', objectFit: 'cover'}} src={banner}/>\r\n            }\r\n         </BS.Card.Body>\r\n    </BS.Card>\r\n    \r\n    <ProfileList sysID={sysID} /> </> } \r\n    \r\n    </>\r\n   )\r\n}","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport  * as BS from 'react-bootstrap';\r\n\r\nimport Loading from '../Components/Loading';\r\nimport API_URL from '../Constants/constants';\r\nimport ProfilePage from '../Components/Public/ProfilePage';\r\n\r\nconst MemberProfile = () => {\r\n    const { memberID } = useParams();\r\n\r\n    const [isLoading, setIsLoading ] = useState(false);\r\n    const [isError, setIsError ] = useState(false);\r\n    const [isForbidden, setIsForbidden ] = useState(false);\r\n    const [ member, setMember ] = useState({});\r\n\r\n    const fetchMember = useCallback( () => {\r\n        setIsLoading(true);\r\n        setIsError(false);\r\n    \r\n         fetch(`${API_URL}m/${memberID}`,{\r\n        method: 'GET',\r\n        }).then ( res => {\r\n          if (res.status === 403) {\r\n            throw new Error('Access denied!');\r\n          }\r\n          return res.json()\r\n        }\r\n        ).then (data => { \r\n        setMember(data)\r\n          setIsLoading(false);\r\n      })\r\n        .catch (error => {\r\n          if (error.message === 'Access denied!') {\r\n            setIsForbidden(true);\r\n          } else {\r\n            console.log(error);\r\n            setIsError(true);\r\n          }\r\n          setIsLoading(false);\r\n        })\r\n      }, [memberID])\r\n    \r\n      useEffect(() => {\r\n        fetchMember();\r\n      }, [fetchMember])\r\n\r\n      return (\r\n          isLoading ? <Loading /> : isError ? \r\n          <BS.Alert variant=\"danger\">Error fetching member.</BS.Alert> : isForbidden ? <BS.Alert variant=\"danger\">This member is private.</BS.Alert> : <ProfilePage member={member} list={false}/>\r\n      );\r\n}\r\n\r\nexport default MemberProfile;","import React from 'react';\r\nimport * as BS from 'react-bootstrap';\r\nimport { FaStar } from \"react-icons/fa\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport history from \"../History.js\";\r\nimport { Switch, Route, useRouteMatch } from 'react-router-dom';\r\nimport Profile from '../Components/Public/Profile.js'\r\nimport MemberProfile from '../Pages/MemberProfile.js'\r\n\r\nexport default function Public () {\r\n    const { path, url } = useRouteMatch();\r\n    const { register: registerSys, handleSubmit: handleSys } = useForm();\r\n\r\n    const submitSysID = (data) => {\r\n        history.push(`${url}/${data.sysID}`);\r\n    }\r\n\r\n    const { register: registerMember, handleSubmit: handleMember } = useForm();\r\n\r\n    const submitMemberID = (data) => {\r\n        history.push(`${url}/m/${data.memberID}`);\r\n    }\r\n\r\n    return (\r\n\r\n        <Switch>\r\n        <Route exact path={path}>\r\n        <BS.Card className=\"mb-3\">\r\n            <BS.Card.Header>\r\n            <BS.Card.Title><FaStar className=\"mr-3\" />Profile</BS.Card.Title>\r\n            </BS.Card.Header>\r\n            <BS.Card.Body>\r\n                <BS.Form onSubmit={handleSys(submitSysID)}>\r\n                    <BS.Form.Label>\r\n                        Submit a <b>system ID</b> to view to that system's profile.\r\n                    </BS.Form.Label>\r\n                    <BS.Form.Row>\r\n                        <BS.Col className=\"mb-1\"  xs={12} lg={10}>\r\n                            <BS.Form.Control name=\"sysID\" {...registerSys(\"sysID\")} defaultValue=\"\" placeholder=\"Enter system ID here...\"/>\r\n                        </BS.Col>\r\n                        <BS.Col>\r\n                            <BS.Button variant=\"primary\" type=\"submit\" block >Submit</BS.Button>\r\n                        </BS.Col>\r\n                    </BS.Form.Row>\r\n                </BS.Form>\r\n            </BS.Card.Body>\r\n        </BS.Card>\r\n        <BS.Card>\r\n            <BS.Card.Body>\r\n                <BS.Form onSubmit={handleMember(submitMemberID)}>\r\n                    <BS.Form.Label>\r\n                        Alternatively, submit a <b>member ID</b> to view that member.\r\n                    </BS.Form.Label>\r\n                    <BS.Form.Row>\r\n                        <BS.Col className=\"mb-1\"  xs={12} lg={10}>\r\n                            <BS.Form.Control name=\"memberID\" {...registerMember(\"memberID\")} defaultValue=\"\" placeholder=\"Enter member ID here...\" />\r\n                        </BS.Col>\r\n                        <BS.Col>\r\n                            <BS.Button variant=\"primary\" type=\"submit\" block >Submit</BS.Button>\r\n                        </BS.Col>\r\n                    </BS.Form.Row>\r\n                </BS.Form>\r\n            </BS.Card.Body>\r\n        </BS.Card>\r\n        </Route>\r\n        <Route path={`${path}/m/:memberID`}>\r\n            <MemberProfile />\r\n        </Route>\r\n        <Route path={`${path}/:sysID`}>\r\n            <Profile />\r\n        </Route>\r\n        </Switch>\r\n    )\r\n}","import React, { useEffect } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport * as fetch from 'node-fetch';\r\n\r\nimport Loading from \"../Components/Loading\";\r\nimport * as BS from \"react-bootstrap\";\r\nimport history from \"../History.js\";\r\nimport { FaLockOpen, FaHome } from \"react-icons/fa\";\r\n\r\nimport API_URL from \"../Constants/constants.js\";\r\n\r\nconst Home = ({isInvalid, setIsInvalid, isLoading, setIsLoading, isSubmit, setIsSubmit, }) => {\r\nconst { register, handleSubmit } = useForm();\r\n\r\n  // submit login form, add the token to the localstorage\r\n  const onSubmit = (data) => {\r\n    localStorage.setItem(\"token\", data.pkToken);\r\n    logIn();\r\n  };\r\n\r\n  function logIn() {\r\n\r\n    // make sure the token is not set to invalid and add a funny little spinner to indicate loading\r\n    setIsInvalid(false);\r\n    setIsLoading(true);\r\n    \r\n    // then fetch the system data with the token stored in localstorage\r\n    fetch(`${API_URL}s/`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Authorization: localStorage.getItem(\"token\"),\r\n      },\r\n    })\r\n    // put all the system data in localstorage\r\n    // TODO: remove this from localstorage? since we know how to pass stuff along components now\r\n    // then push the user to the dash!\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        localStorage.setItem(\"user\", JSON.stringify(data));\r\n        setIsSubmit(true);\r\n        setIsLoading(false);\r\n        history.push(\"/dash\");\r\n      })\r\n      // remove the token and user data from localstorage if there's an error, also set the token as invalid\r\n      // TODO: an error doesn't mean the token is invalid, change this depending on what error is thrown\r\n      .catch((error) => {\r\n        console.log(error);\r\n        setIsInvalid(true);\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"user\");\r\n        setIsLoading(false);\r\n      });\r\n  }\r\n\r\n  // when the homepage loads, check if there's a token, if there is, check if it's still valid\r\n  // removing the dependency array causes a rerender loop, so just ignore ESlint here\r\n  useEffect(() => {\r\n    if (localStorage.getItem('token')) {\r\n      checkLogIn();\r\n    }\r\n  }, []);\r\n\r\n  // very similar to LogIn(), only difference is that it doesn't push the user afterwards\r\n  // TODO: useless double code that probably could be refactored somehow\r\n  function checkLogIn() {\r\n    setIsInvalid(false);\r\n    setIsLoading(true);\r\n    \r\n     fetch(`${API_URL}s/`,{\r\n       method: 'GET',\r\n       headers: {\r\n         'Authorization': localStorage.getItem(\"token\")\r\n       }}).then ( res => res.json()\r\n       ).then (data => { \r\n         localStorage.setItem('user', JSON.stringify(data));\r\n         setIsSubmit(true);\r\n         setIsLoading(false);\r\n     })\r\n       .catch (error => { \r\n         console.log(error);\r\n         setIsInvalid(true);\r\n         localStorage.removeItem('token');\r\n         localStorage.removeItem('user');\r\n         setIsLoading(false);\r\n       })\r\n     };\r\n\r\n  return (\r\n    <>\r\n    {/* if the page is loading, just show the loading component */}\r\n      {isLoading ? (\r\n        <Loading />\r\n      ) : (\r\n        <BS.Card className=\"mb-3 mt-3\">\r\n          <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n            <BS.Card.Title>\r\n              <FaLockOpen className=\"mr-3\" />\r\n              Login\r\n            </BS.Card.Title>\r\n          </BS.Card.Header>\r\n          <BS.Card.Body>\r\n            {/* if the login form has been submitted, and there's no user object, show a generic error */}\r\n            {isSubmit && !localStorage.getItem(\"user\") ? (\r\n              <BS.Alert variant=\"danger\">\r\n                Something went wrong, please try again.\r\n              </BS.Alert>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {/* if the inserted token is invalid, show invalid error! \r\n              this also shows if the token used in checkLogIn() is invalid */}\r\n            {isInvalid ? (\r\n              <BS.Alert variant=\"danger\">Invalid token.</BS.Alert>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            { // if there's a user object in localstorage, and there's a token in localstorage, the user is logged in already\r\n            localStorage.getItem(\"user\") && localStorage.getItem(\"token\") ? (\r\n              <>\r\n                <p>\r\n                  You are logged in already, click here to continue to the dash.\r\n                </p>\r\n                <BS.Button\r\n                  type=\"primary\"\r\n                  onClick={() => history.push(\"/dash\")}\r\n                >\r\n                  Continue to dash\r\n                </BS.Button>\r\n              </>\r\n            ) : (\r\n              // otherwise, show login form\r\n              <BS.Form onSubmit={handleSubmit(onSubmit)}>\r\n                <BS.Form.Row>\r\n                  <BS.Col className=\"mb-1\" xs={12} lg={10}>\r\n                    <BS.Form.Label>\r\n                      Enter your token here. You can get your token by using{\" \"}\r\n                      <b>\"pk;token\"</b>.\r\n                    </BS.Form.Label>\r\n                  </BS.Col>\r\n                </BS.Form.Row>\r\n                <BS.Form.Row>\r\n                  <BS.Col xs={12} lg={10}>\r\n                    <BS.Form.Control\r\n                      required\r\n                      name=\"pkToken\"\r\n                      type=\"text\"\r\n                      {...register(\"pkToken\")}\r\n                      placeholder=\"token\"\r\n                    />\r\n                  </BS.Col>\r\n                  <BS.Col>\r\n                    <BS.Button variant=\"primary\" type=\"submit\" block>\r\n                      Submit\r\n                    </BS.Button>\r\n                  </BS.Col>\r\n                </BS.Form.Row>\r\n              </BS.Form>\r\n            )}\r\n          </BS.Card.Body>\r\n        </BS.Card>\r\n      )}\r\n      <BS.Card>\r\n      <BS.Card.Header>\r\n        <BS.Card.Title>\r\n          <FaHome className=\"mr-3\" />\r\n          Welcome!\r\n        </BS.Card.Title>\r\n      </BS.Card.Header>\r\n      <BS.Card.Body>\r\n        <p>Pk-webs is a web interface for PluralKit, it lets you edit your system and members using PluralKit's API, without having to use commands on discord.</p>\r\n        <blockquote>\r\n          <p>This website is an ongoing project and will be sporadically updated. If you have any issues or questions, join <a href='https://discord.gg/PczBt78'>PluralKit's support server</a> and ping us (PALS#1612). Since this project is unofficial, the actual pluralkit devs will not be able to help you with everything.</p>\r\n        </blockquote>\r\n        <hr/>\r\n        <h5>FAQ:</h5>\r\n        Will groups be added to this website?\r\n        <blockquote>In the future, yes! Groups are not in the API as of now, which is what this site depends on. When APIv2 comes out, they will eventually be added here too.</blockquote>\r\n        Will switch history/editing switches be added to this website?\r\n        <blockquote>Probably when APIv2 comes out, right now the API is very limited in how it can handle switches. And we'd rather add everything in one go.</blockquote>\r\n        What about bulk editing?\r\n        <blockquote>Probably not. Bulk commands are planned for the main bot, and we're not sure how to fit them into the main site at the moment.</blockquote>\r\n        Can you add [other feature]?\r\n        <blockquote>Depends on the feature. Ping us in the support server and we'll let you know if it's feasible or not. If it's accessibility related, chances are good that we'll add it.</blockquote>\r\n        Can i contribute to this?\r\n        <blockquote>Yeah sure! The code is open source on <a href='https://github.com/Spectralitree/pk-webs/'>github</a>. Be warned though that we're currently in the middle of cleaning it all up and adding comments to everything, so some sections are quite messy still.</blockquote>\r\n      </BS.Card.Body>\r\n      </BS.Card>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\n\r\nimport * as BS from \"react-bootstrap\";\r\nimport { FaCog } from \"react-icons/fa\";\r\nimport Toggle from \"react-toggle\";\r\n\r\nconst Settings = ({ forceUpdate }) => {\r\n\r\n// this all should be pretty self-explanatory, might add comments later tho\r\n  return (\r\n    <BS.Card>\r\n      <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n        <BS.Card.Title>\r\n          <FaCog className=\"mr-3\" />\r\n          Settings\r\n        </BS.Card.Title>\r\n      </BS.Card.Header>\r\n      <BS.Card.Body>\r\n        <p>\r\n          Change how you view and use pk-webs here, changes will be saved after\r\n          refreshing. You will have to apply them again in different browsers\r\n          and on different devices.\r\n        </p>\r\n        <hr />\r\n        <BS.Row>\r\n          <BS.Col\r\n            xs={12}\r\n            lg={4}\r\n            className=\"mx-1 mb-4 d-flex align-items-center row\"\r\n          >\r\n            {localStorage.getItem(\"opendyslexic\") ? (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={true}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.removeItem(\"opendyslexic\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            ) : (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={false}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.setItem(\"opendyslexic\", \"true\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            )}\r\n            Use opendyslexic?\r\n          </BS.Col>\r\n          <BS.Col\r\n            xs={12}\r\n            lg={4}\r\n            className=\"mx-1 mb-4 d-flex align-items-center row\"\r\n          >\r\n            {localStorage.getItem(\"twemoji\") ? (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={true}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.removeItem(\"twemoji\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            ) : (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={false}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.setItem(\"twemoji\", \"true\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            )}\r\n            Use twemoji?\r\n          </BS.Col>\r\n          <BS.Col\r\n            xs={12}\r\n            lg={4}\r\n            className=\"mx-1 mb-4 d-flex align-items-center row\"\r\n          >\r\n            {localStorage.getItem(\"pagesonly\") ? (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={true}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.removeItem(\"pagesonly\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            ) : (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={false}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.setItem(\"pagesonly\", \"true\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            )}\r\n            Use only member pages?\r\n          </BS.Col>\r\n          <BS.Col\r\n            xs={12}\r\n            lg={4}\r\n            className=\"mx-1 mb-4 d-flex align-items-center row\"\r\n          >\r\n            {localStorage.getItem(\"fullbg\") ? (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={true}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.removeItem(\"fullbg\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            ) : (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={false}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.setItem(\"fullbg\", \"true\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            )}\r\n            Remove gradient from background color?\r\n          </BS.Col>\r\n          <BS.Col\r\n            xs={12}\r\n            lg={4}\r\n            className=\"mx-1 mb-4 d-flex align-items-center row\"\r\n          >\r\n            {localStorage.getItem(\"colorbg\") ? (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={true}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.removeItem(\"colorbg\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            ) : (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={false}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.setItem(\"colorbg\", \"false\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            )}\r\n            Hide colored backgrounds altogether?\r\n          </BS.Col>\r\n          <BS.Col\r\n            xs={12}\r\n            lg={4}\r\n            className=\"mx-1 mb-4 d-flex align-items-center row\"\r\n          >\r\n            {localStorage.getItem(\"expandcards\") ? (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={true}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.removeItem(\"expandcards\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            ) : (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={false}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.setItem(\"expandcards\", \"true\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            )}\r\n            Expand member cards on default?\r\n          </BS.Col>\r\n          <BS.Col\r\n            xs={12}\r\n            lg={4}\r\n            className=\"mx-1 mb-4 d-flex align-items-center row\"\r\n          >\r\n            {localStorage.getItem(\"hidebanners\") ? (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={true}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.removeItem(\"hidebanners\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            ) : (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={false}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.setItem(\"hidebanners\", \"true\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            )}\r\n            Hide banners at the top?\r\n          </BS.Col>\r\n          <BS.Col\r\n            xs={12}\r\n            lg={4}\r\n            className=\"mx-1 mb-4 d-flex align-items-center row\"\r\n          >\r\n            {localStorage.getItem(\"bottombanners\") ? (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={true}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.removeItem(\"bottombanners\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            ) : (\r\n              <Toggle\r\n                className=\"mr-2\"\r\n                defaultChecked={false}\r\n                icons={false}\r\n                onChange={() => {\r\n                  localStorage.setItem(\"bottombanners\", \"true\");\r\n                  forceUpdate();\r\n                }}\r\n              />\r\n            )}\r\n            Show banners at the bottom?\r\n          </BS.Col>\r\n        </BS.Row>\r\n      </BS.Card.Body>\r\n    </BS.Card>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import { useEffect, useState } from 'react';\r\nimport * as BS from 'react-bootstrap';\r\nimport { FaFileAlt } from 'react-icons/fa';\r\nimport { useForm } from 'react-hook-form';\r\nimport autosize from 'autosize';\r\n\r\nconst Template = () => {\r\n    const [isSubmit, setIsSubmit] = useState(false);\r\n\r\n    const { register, handleSubmit } = useForm();\r\n    \r\n    var template1 = \"\";\r\n    var template2 = \"\";\r\n    var template3 = \"\";\r\n    if (localStorage.getItem('template1') !== null) template1 = localStorage.getItem('template1');\r\n    if (localStorage.getItem('template2') !== null) template2 = localStorage.getItem('template2');\r\n    if (localStorage.getItem('template3') !== null) template3 = localStorage.getItem('template3');\r\n\r\n    const onSubmit = data => {\r\n        localStorage.setItem('template1', data.template1);\r\n        localStorage.setItem('template2', data.template2);\r\n        localStorage.setItem('template3', data.template3);\r\n        setIsSubmit(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        autosize(document.querySelectorAll('textarea'));\r\n    });\r\n\r\n    return (\r\n        <>\r\n        <BS.Card className=\"mb-3\">\r\n            <BS.Card.Header>\r\n                <BS.Card.Title>\r\n                <FaFileAlt className=\"mr-3\" />\r\n                Templates\r\n                </BS.Card.Title>\r\n            </BS.Card.Header>\r\n            <BS.Card.Body>\r\n                <p>Templates allow you to quickly set up a member description with a specific layout. Put in the template in one of the below fields, and access it whenever you create or edit a member. You can set up to 3 templates.</p>\r\n                <p><b>Note:</b> just like the settings, these templates are saved in your localstorage, which means you will have to set them again on every different device/browser you use. If you clear your local storage, the templates will also be cleared!</p>\r\n            </BS.Card.Body>\r\n        </BS.Card>\r\n        \r\n        <BS.Card>\r\n            <BS.Card.Body>\r\n                <BS.Form onSubmit={handleSubmit(onSubmit)}>\r\n                    <BS.Form.Group className=\"mt-3\">\r\n                        <BS.Form.Label><b>Template 1.</b></BS.Form.Label>\r\n                        <BS.Form.Control maxLength=\"1000\" as=\"textarea\" name=\"template1\" {...register(\"template1\")} defaultValue={template1}/>\r\n                    </BS.Form.Group>\r\n                    <BS.Form.Group className=\"mt-3\">\r\n                        <BS.Form.Label><b>Template 2.</b></BS.Form.Label>\r\n                        <BS.Form.Control maxLength=\"1000\" as=\"textarea\" name=\"template2\" {...register(\"template2\")} defaultValue={template2}/>\r\n                    </BS.Form.Group>\r\n                    <BS.Form.Group className=\"mt-3\">\r\n                        <BS.Form.Label><b>Template 3.</b></BS.Form.Label>\r\n                        <BS.Form.Control maxLength=\"1000\" as=\"textarea\" name=\"template3\" {...register(\"template3\")} defaultValue={template3}/>\r\n                    </BS.Form.Group>\r\n                    <BS.Button variant=\"primary\" className=\"float-left mr-2\" type=\"submit\">Submit</BS.Button> { isSubmit? <p style={{opacity: 0.7}}>Templates saved!</p> : \"\"}\r\n                </BS.Form>\r\n            </BS.Card.Body>\r\n        </BS.Card>\r\n    </>\r\n    );\r\n}\r\n\r\nexport default Template;","import React from 'react';\r\n\r\nimport  * as BS from 'react-bootstrap'\r\nimport Toggle from 'react-toggle'\r\nimport { FaSun, FaMoon } from \"react-icons/fa\";\r\nimport useDarkMode from 'use-dark-mode';\r\n\r\nimport history from \"../History.js\";\r\n\r\nconst Navbar = ({ setIsSubmit, forceUpdate}) => {\r\n    const darkMode = useDarkMode(false);\r\n\r\n    function logOut() {\r\n        setIsSubmit(false);\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"user\");\r\n        history.push(\"/\");\r\n        forceUpdate();\r\n      }\r\n\r\n    return(\r\n        <BS.Navbar className=\"mb-5 align-items-center\">\r\n            <BS.Navbar.Brand href=\"/\">\r\n                pk-webs\r\n            </BS.Navbar.Brand>\r\n            <BS.NavDropdown id=\"menu\" className=\"mr-auto\" title=\"Menu\">\r\n            {/* for some reason just using react router's link elements doesn't work here, maybe look into that */}\r\n            <BS.NavDropdown.Item onClick={() => history.push('/dash')} >Dash</BS.NavDropdown.Item>\r\n            <BS.NavDropdown.Item onClick={() => history.push('/settings')} >Settings</BS.NavDropdown.Item>\r\n            <BS.NavDropdown.Item onClick={() => history.push('/template')}>Templates</BS.NavDropdown.Item>\r\n            <BS.NavDropdown.Item onClick={() => history.push('/profile')}>Public profile</BS.NavDropdown.Item>\r\n            { localStorage.getItem('token') ? <><hr className=\"my-1\"/><BS.NavDropdown.Item onClick={() => logOut()}>Log out</BS.NavDropdown.Item></> : \"\" }\r\n\r\n            </BS.NavDropdown>\r\n            <BS.Nav className=\"mr-2 d-flex align-items-center row\">\r\n            <Toggle\r\n                defaultChecked={true}\r\n                icons={false}\r\n                onChange={darkMode.toggle} />\r\n                {darkMode.value ? <FaMoon className=\"m-1\"/> : <FaSun className=\"m-1\"/>}\r\n            </BS.Nav>\r\n        </BS.Navbar>\r\n    );\r\n}\r\n\r\nexport default Navbar;","import React, { useState, useCallback} from 'react';\r\nimport { Router, Switch, Route, Redirect } from 'react-router-dom';\r\nimport  * as BS from 'react-bootstrap'\r\n\r\nimport './App.scss';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport \"react-toggle/style.css\"\r\n\r\nimport Dash from './Pages/Dash.js'\r\nimport history from \"./History.js\"\r\nimport Footer from './Components/Footer.js'\r\nimport Public from './Pages/Public.js'\r\nimport Home from './Pages/Home.js'\r\nimport Settings from './Pages/Settings.js'\r\nimport Template from './Pages/Template.js'\r\nimport Navbar from './Components/Navbar.js'\r\n\r\nexport default function App() {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isSubmit, setIsSubmit] = useState(false);\r\n  const [isInvalid, setIsInvalid] = useState(false);\r\n\r\n  const [, updateState] = useState();\r\n  const forceUpdate = useCallback(() => updateState({}), []);\r\n\r\n  return (\r\n    <div className={ `contents ${localStorage.getItem('opendyslexic') ? \"opendyslexic\" : \"\"}`}>\r\n      <Router history={history}>\r\n        <Navbar forceUpdate={forceUpdate} setIsSubmit={setIsSubmit} />\r\n        <div className=\"content\">\r\n          <BS.Container>\r\n            <Switch>\r\n            <Route path=\"/dash\">\r\n              { !localStorage.getItem('token') || isInvalid ? <Redirect to=\"/\"/> : <Dash />\r\n              }\r\n              </Route>\r\n              <Route exact path=\"/\">\r\n                <Home isLoading={isLoading} setIsLoading={setIsLoading} isSubmit={isSubmit} setIsSubmit={setIsSubmit} isInvalid={isInvalid} setIsInvalid={setIsInvalid}/>\r\n              </Route>\r\n              <Route path=\"/profile\">\r\n                <Public />\r\n              </Route>\r\n              <Route path=\"/settings\">\r\n                <Settings forceUpdate={forceUpdate}/>\r\n              </Route>\r\n              <Route path=\"/template\">\r\n                <Template/>\r\n              </Route>\r\n            </Switch>\r\n          </BS.Container>\r\n          </div>\r\n          <Footer />\r\n      </Router>\r\n      </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Router } from \"react-router-dom\";\r\nimport history from \"./History.js\";\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <Router history={history}>\r\n    <App />\r\n  </Router>,\r\n  document.getElementById('root')\r\n);\r\n","const markdown = require('simple-markdown');\r\nconst highlight = require('highlight.js');\r\n\r\nfunction htmlTag(tagName, content, attributes, isClosed = true, state = { }) {\r\n\tif (typeof isClosed === 'object') {\r\n\t\tstate = isClosed;\r\n\t\tisClosed = true;\r\n\t}\r\n\r\n\tif (!attributes)\r\n\t\tattributes = { };\r\n\r\n\tif (attributes.class && state.cssModuleNames)\r\n\t\tattributes.class = attributes.class.split(' ').map(cl => state.cssModuleNames[cl] || cl).join(' ');\r\n\r\n\tlet attributeString = '';\r\n\tfor (let attr in attributes) {\r\n\t\t// Removes falsy attributes\r\n\t\tif (Object.prototype.hasOwnProperty.call(attributes, attr) && attributes[attr])\r\n\t\t\tattributeString += ` ${markdown.sanitizeText(attr)}=\"${markdown.sanitizeText(attributes[attr])}\"`;\r\n\t}\r\n\r\n\tlet unclosedTag = `<${tagName}${attributeString}>`;\r\n\r\n\tif (isClosed)\r\n\t\treturn unclosedTag + content + `</${tagName}>`;\r\n\treturn unclosedTag;\r\n}\r\nmarkdown.htmlTag = htmlTag;\r\n\r\nconst rules = {\r\n\tblockQuote: Object.assign({ }, markdown.defaultRules.blockQuote, {\r\n\t\tmatch: function(source, state, prevSource) {\r\n\t\t\treturn !/^$|\\n *$/.test(prevSource) || state.inQuote ? null : /^( *>>> ([\\s\\S]*))|^( *> [^\\n]*(\\n *> [^\\n]*)*\\n?)/.exec(source);\r\n\t\t},\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\tconst all = capture[0];\r\n\t\t\tconst isBlock = Boolean(/^ *>>> ?/.exec(all));\r\n\t\t\tconst removeSyntaxRegex = isBlock ? /^ *>>> ?/ : /^ *> ?/gm;\r\n\t\t\tconst content = all.replace(removeSyntaxRegex, '');\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcontent: parse(content, Object.assign({ }, state, { inQuote: true })),\r\n\t\t\t\ttype: 'blockQuote'\r\n\t\t\t}\r\n\t\t}\r\n\t}),\r\n\tcodeBlock: Object.assign({ }, markdown.defaultRules.codeBlock, {\r\n\t\tmatch: markdown.inlineRegex(/^```(([a-z0-9-]+?)\\n+)?\\n*([^]+?)\\n*```/i),\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\treturn {\r\n\t\t\t\tlang: (capture[2] || '').trim(),\r\n\t\t\t\tcontent: capture[3] || '',\r\n\t\t\t\tinQuote: state.inQuote || false\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: (node, output, state) => {\r\n\t\t\tlet code;\r\n\t\t\tif (node.lang && highlight.getLanguage(node.lang))\r\n\t\t\t\tcode = highlight.highlight(node.lang, node.content, true); // Discord seems to set ignoreIllegals: true\r\n\r\n\t\t\tif (code && state.cssModuleNames) // Replace classes in hljs output\r\n\t\t\t\tcode.value = code.value.replace(/<span class=\"([a-z0-9-_ ]+)\">/gi, (str, m) =>\r\n\t\t\t\t\tstr.replace(m, m.split(' ').map(cl => state.cssModuleNames[cl] || cl).join(' ')));\r\n\r\n\t\t\treturn htmlTag('pre', htmlTag(\r\n\t\t\t\t'code', code ? code.value : markdown.sanitizeText(node.content), { class: `hljs${code ? ' ' + code.language : ''}` }, state\r\n\t\t\t), null, state);\r\n\t\t}\r\n\t}),\r\n\tnewline: markdown.defaultRules.newline,\r\n\tescape: markdown.defaultRules.escape,\r\n\tautolink: Object.assign({ }, markdown.defaultRules.autolink, {\r\n\t\tparse: capture => {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: [{\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tcontent: capture[1]\r\n\t\t\t\t}],\r\n\t\t\t\ttarget: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: (node, output, state) => {\r\n\t\t\treturn htmlTag('a', output(node.content, state), { href: markdown.sanitizeUrl(node.target) }, state);\r\n\t\t}\r\n\t}),\r\n\turl: Object.assign({ }, markdown.defaultRules.url, {\r\n\t\tparse: capture => {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: [{\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tcontent: capture[1]\r\n\t\t\t\t}],\r\n\t\t\t\ttarget: capture[1]\r\n\t\t\t}\r\n\t\t},\r\n\t\thtml: (node, output, state) => {\r\n\t\t\treturn htmlTag('a', output(node.content, state), { href: markdown.sanitizeUrl(node.target) }, state);\r\n\t\t}\r\n\t}),\r\n\tem: Object.assign({ }, markdown.defaultRules.em, {\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\tconst parsed = markdown.defaultRules.em.parse(capture, parse, Object.assign({ }, state, { inEmphasis: true }));\r\n\t\t\treturn state.inEmphasis ? parsed.content : parsed;\r\n\t\t},\r\n\t}),\r\n\tstrong: markdown.defaultRules.strong,\r\n\tu: markdown.defaultRules.u,\r\n\tstrike: Object.assign({ }, markdown.defaultRules.del, {\r\n\t\tmatch: markdown.inlineRegex(/^~~([\\s\\S]+?)~~(?!_)/),\r\n\t}),\r\n\tinlineCode: Object.assign({ }, markdown.defaultRules.inlineCode, {\r\n\t\tmatch: source => markdown.defaultRules.inlineCode.match.regex.exec(source),\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('code', markdown.sanitizeText(node.content.trim()), null, state);\r\n\t\t}\r\n\t}),\r\n\ttext: Object.assign({ }, markdown.defaultRules.text, {\r\n\t\tmatch: source => /^[\\s\\S]+?(?=[^0-9A-Za-z\\s\\u00c0-\\uffff-]|\\n\\n|\\n|\\w+:\\S|$)/.exec(source),\r\n\t\thtml: function(node, output, state) {\r\n\t\t\tif (state.escapeHTML)\r\n\t\t\t\treturn markdown.sanitizeText(node.content);\r\n\r\n\t\t\treturn node.content;\r\n\t\t}\r\n\t}),\r\n\temoticon: {\r\n\t\torder: markdown.defaultRules.text.order,\r\n\t\tmatch: source => /^(¯\\\\_\\(ツ\\)_\\/¯)/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tcontent: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn output(node.content, state);\r\n\t\t},\r\n\t},\r\n\tbr: Object.assign({ }, markdown.defaultRules.br, {\r\n\t\tmatch: markdown.anyScopeRegex(/^\\n/),\r\n\t}),\r\n\tspoiler: {\r\n\t\torder: 0,\r\n\t\tmatch: source => /^\\|\\|([\\s\\S]+?)\\|\\|/.exec(source),\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: parse(capture[1], state)\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('a', output(node.content, state), { class: 'd-spoiler' }, state);\r\n\t\t}\r\n\t},\r\n\tlink: Object.assign({ }, markdown.defaultRules.link, {\r\n\t\thtml: (node, output, state) => {\r\n\t\t\treturn htmlTag('a', output(node.content, state), { href: markdown.sanitizeUrl(node.target), rel: \"noreferrer\", target: \"_blank\" }, state);\r\n\t\t}\r\n\t})\r\n};\r\n\r\nconst discordCallbackDefaults = {\r\n\tuser: node => '@' + markdown.sanitizeText(node.id),\r\n\tchannel: node => '#' + markdown.sanitizeText(node.id),\r\n\trole: node => '&' + markdown.sanitizeText(node.id),\r\n\teveryone: () => '@everyone',\r\n\there: () => '@here'\r\n};\r\n\r\nconst rulesDiscord = {\r\n\tdiscordUser: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<@!?([0-9]*)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tid: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.user(node), { class: 'd-mention d-user' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordChannel: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<#?([0-9]*)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tid: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.channel(node), { class: 'd-mention d-channel' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordRole: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<@&([0-9]*)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tid: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.role(node), { class: 'd-mention d-role' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordEmoji: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<(a?):(\\w+):(\\d+)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tanimated: capture[1] === \"a\",\r\n\t\t\t\tname: capture[2],\r\n\t\t\t\tid: capture[3],\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('img', '', {\r\n\t\t\t\tclass: `d-emoji${node.animated ? ' d-emoji-animated' : ''}`,\r\n\t\t\t\tsrc: `https://cdn.discordapp.com/emojis/${node.id}.${node.animated ? 'gif' : 'png'}`,\r\n\t\t\t\talt: `:${node.name}:`\r\n\t\t\t}, false, state);\r\n\t\t}\r\n\t},\r\n\tdiscordEveryone: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^@everyone/.exec(source),\r\n\t\tparse: function() {\r\n\t\t\treturn { };\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.everyone(node), { class: 'd-mention d-user' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordHere: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^@here/.exec(source),\r\n\t\tparse: function() {\r\n\t\t\treturn { };\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.here(node), { class: 'd-mention d-user' }, state);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nObject.assign(rules, rulesDiscord);\r\n\r\nconst rulesDiscordOnly = Object.assign({ }, rulesDiscord, {\r\n\ttext: Object.assign({ }, markdown.defaultRules.text, {\r\n\t\tmatch: source => /^[\\s\\S]+?(?=[^0-9A-Za-z\\s\\u00c0-\\uffff-]|\\n\\n|\\n|\\w+:\\S|$)/.exec(source),\r\n\t\thtml: function(node, output, state) {\r\n\t\t\tif (state.escapeHTML)\r\n\t\t\t\treturn markdown.sanitizeText(node.content);\r\n\r\n\t\t\treturn node.content;\r\n\t\t}\r\n\t})\r\n});\r\n\r\nconst rulesEmbed = Object.assign({ }, rules, {\r\n\tlink: markdown.defaultRules.link\r\n});\r\n\r\nconst parser = markdown.parserFor(rules);\r\nconst htmlOutput = markdown.htmlFor(markdown.ruleOutput(rules, 'html'));\r\nconst parserDiscord = markdown.parserFor(rulesDiscordOnly);\r\nconst htmlOutputDiscord = markdown.htmlFor(markdown.ruleOutput(rulesDiscordOnly, 'html'));\r\nconst parserEmbed = markdown.parserFor(rulesEmbed);\r\nconst htmlOutputEmbed = markdown.htmlFor(markdown.ruleOutput(rulesEmbed, 'html'));\r\n\r\n/**\r\n * Parse markdown and return the HTML output\r\n * @param {String} source Source markdown content\r\n * @param {Object} [options] Options for the parser\r\n * @param {Boolean} [options.embed=false] Parse as embed content\r\n * @param {Boolean} [options.escapeHTML=true] Escape HTML in the output\r\n * @param {Boolean} [options.discordOnly=false] Only parse Discord-specific stuff (such as mentions)\r\n * @param {Object} [options.discordCallback] Provide custom handling for mentions and emojis\r\n * @param {Object} [options.cssModuleNames] An object mapping css classes to css module classes\r\n */\r\nfunction toHTML(source, options, customParser, customHtmlOutput) {\r\n\tif ((customParser || customHtmlOutput) && (!customParser || !customHtmlOutput))\r\n\t\tthrow new Error('You must pass both a custom parser and custom htmlOutput function, not just one');\r\n\r\n\toptions = Object.assign({\r\n\t\tembed: false,\r\n\t\tescapeHTML: true,\r\n\t\tdiscordOnly: false,\r\n\t\tdiscordCallback: { }\r\n\t}, options || { });\r\n\r\n\tlet _parser = parser;\r\n\tlet _htmlOutput = htmlOutput;\r\n\tif (customParser) {\r\n\t\t_parser = customParser;\r\n\t\t_htmlOutput = customHtmlOutput;\r\n\t} else if (options.discordOnly) {\r\n\t\t_parser = parserDiscord;\r\n\t\t_htmlOutput = htmlOutputDiscord;\r\n\t} else if (options.embed) {\r\n\t\t_parser = parserEmbed;\r\n\t\t_htmlOutput = htmlOutputEmbed;\r\n\t}\r\n\r\n\tconst state = {\r\n\t\tinline: true,\r\n\t\tinQuote: false,\r\n\t\tinEmphasis: false,\r\n\t\tescapeHTML: options.escapeHTML,\r\n\t\tcssModuleNames: options.cssModuleNames || null,\r\n\t\tdiscordCallback: Object.assign({ }, discordCallbackDefaults, options.discordCallback)\r\n\t};\r\n\r\n\treturn _htmlOutput(_parser(source, state), state);\r\n}\r\n\r\nmodule.exports = {\r\n\tparser: source => parser(source, { inline: true }),\r\n\thtmlOutput,\r\n\ttoHTML,\r\n\trules,\r\n\trulesDiscordOnly,\r\n\trulesEmbed,\r\n\tmarkdownEngine: markdown,\r\n\thtmlTag\r\n};"],"sourceRoot":""}